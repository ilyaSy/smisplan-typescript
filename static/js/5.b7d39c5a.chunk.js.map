{"version":3,"sources":["utils/sortData.ts","utils/hooks/useGetDataMeta.tsx","components/UI/ModalWithList.tsx","components/UI/TableEditableCell/TableEditableCell.module.scss","components/ActionMenu/ActionMenu.module.scss","components/UI/DropdownMenu/DropdownMenu.module.scss","components/UI/FilterPanel/FilterPanel.module.scss","components/UI/ColumnsPanel/ColumnsPanel.module.scss","components/UI/Table/Table.module.scss","components/DataTable/DataTable.module.scss","utils/mapMetadataToColumns.ts","components/UI/TableEditableRow/index.tsx","components/UI/TableEditableCell/index.tsx","components/TableEditableCell/index.tsx","components/UI/TableExpandableRow.tsx","components/UI/TableFilterIcon.tsx","components/Modals/ConfirmModal/index.tsx","components/ActionMenu/createActions.tsx","components/UI/DropdownMenu/index.tsx","components/Modals/DataEditModal/index.tsx","components/ActionMenu/index.tsx","components/UI/Table/index.tsx","components/UI/ColumnsPanel/index.tsx","components/UI/FilterPanel/index.tsx","components/DataTable/index.tsx"],"names":["sortData","key","direction","type","a","b","valueA","valueB","useGetDataMeta","tablename","useState","data","setData","useDictionaryContext","dictionary","setDictionary","useDataSelector","sourceData","isErrorData","isError","isLoadingData","isLoading","useMetadataSelector","metadata","isErrorMetadata","isLoadingMetadata","dispatch","useDispatch","mapDictionaryCb","useCallback","value","metadataProperty","find","property","id","split","map","v","text","join","includes","useEffect","dataGetAction","metadataGetAction","filter","forEach","validValues","Object","keys","length","d","mapValues","ModalWithList","title","dataSource","noDataText","avatar","width","Modal","info","content","renderItem","item","Item","Meta","description","module","exports","mapMetadataToColumns","c","metadataColumn","dataIndex","sorter","compare","undefined","multiple","sort","tableIndex","EditableContext","createContext","DataTableEditableRow","props","Form","useForm","form","component","Provider","TableEditableCell","inputRef","editing","editable","children","handleSave","record","handleToggleEdit","restProps","childNode","style","margin","name","rules","required","message","ref","onPressEnter","onBlur","className","classes","paddingRight","onClick","DataTableEditableCell","useGetTablename","setEditing","useRef","useContext","current","focus","setFieldsValue","save","validateFields","values","dataUpdateAction","convertDataItem","console","log","TableExpandableRow","rowExpandable","expandedRowRender","TableFilterIcon","filtered","placement","FilterOutlined","fontSize","color","confirm","showConfirmModal","onOk","onCancel","onFinally","okText","icon","ExclamationCircleOutlined","okType","cancelText","handleDummyClick","DropdownMenu","menuItems","defaultSelectedKeys","selectedKeys","activeKey","menuItem","index","Divider","SubMenu","items","subMenuItem","DataEditModal","isOpen","onEditHandler","onAddHandler","onClose","formData","formItems","setFormItems","initialValues","setInitialValues","m","label","disabled","isEditable","ModalWithForm","getTableParameters","addMenuTitle","okButtonTitle","handleOk","handleClose","additionalButtons","ActionMenu","dataItem","tableParameters","openModal","setOpenModal","handleEdit","handleGetConnectedData","axios","get","urlApi","response","CarryOutOutlined","Notification","statusText","actions","handleOpen","handleDelete","hasDiscussion","push","ScheduleOutlined","ScheduleFilled","hasEditMenu","EditFilled","hasSetStatusMenu","entries","status","statusKey","statusInfo","hasDeleteButton","DeleteFilled","hasNotificationButton","BellOutlined","createActions","t","dataDeleteAction","dataAddAction","DataAddModal","modalTablename","modalInitialValues","theme","mainQuestions","Button","overlay","trigger","DataTable","columns","invertDictionary","usePrintPDFContext","setDataPrintRef","setDataPrintMode","dataPrintMode","dataRef","page","setPage","pageSize","setPageSize","hasActionMenu","useMemo","action","getDefaultSorter","field","Array","isArray","defaultSortField","indexOf","defaultSortDirection","initialVisible","columnsData","setColumnsData","visible","setVisible","openPanel","closePanel","resetColumns","setFields","showInTable","handleSubmit","prev","columnData","ColumnsPanelButtons","OrderedListOutlined","ColumnsPanel","preserve","labelCol","span","wrapperCol","onFinish","onFinishFailed","formItem","valuePropName","initialValue","marginBottom","marginTop","htmlType","useColumnsDrawer","tableColumns","column","isInlineEditable","defaultSortOrder","sortOrder","filterIcon","onCell","render","columnId","tableValue","originalValue","isTagged","tag","tableColumn","Math","ceil","visibleResetButton","setVisibleResetButton","filterData","setFilterData","e","handleReset","resetFields","reduce","acc","FilterButtons","FilterFilled","display","FilterPanel","isFilter","TextArea","allowClear","filterOption","option","RegExp","test","mode","showSearch","options","format","showTime","textAlign","useFilterDrawer","handleChangePage","nextPage","TableTitle","showSizeChanger","onChange","total","locale","ruRU","tableLayout","components","body","row","TableEditableRow","cell","rowClassName","bordered","loading","size","expandable","sticky","pagination","position","table","Title","Typography","setTableParameters","center","LoadingComponent","level"],"mappings":"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","file":"static/js/5.b7d39c5a.chunk.js","sourcesContent":["import { TData } from \"../types/TData\";\r\nimport { TDataTypes } from \"../types/TDataTypes\";\r\n\r\nconst sortData =\r\n  (key: string, direction: \"ascend\" | \"descend\" = \"ascend\", type?: TDataTypes) =>\r\n  (a: TData, b: TData) =>\r\n  {\r\n    const valueA = type && type === 'number' ? +a[key] : a[key];\r\n    const valueB = type && type === 'number' ? +b[key] : b[key];\r\n\r\n    if (valueA < valueB) return direction === \"ascend\" ? -1 : 1;\r\n    if (valueA > valueB) return direction === \"ascend\" ? 1 : -1;\r\n    return 0;\r\n  }\r\n\r\nexport default sortData;\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { mapValues } from \"lodash\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useDataSelector } from \"../../storages/selectors/data\";\r\nimport { useMetadataSelector } from \"../../storages/selectors/metadata\";\r\nimport { dataGetAction } from \"../../storages/actions/data\";\r\nimport { metadataGetAction } from \"../../storages/actions/metadata\";\r\nimport { useDictionaryContext } from \"../../context/DictionaryContext\";\r\nimport { TData } from \"../../types/TData\";\r\n\r\nexport const useGetDataMeta = (tablename: string) => {\r\n  const [ data, setData ] = useState<TData[]>([]);\r\n  const { dictionary, setDictionary } = useDictionaryContext();\r\n\r\n  const { data: sourceData, isError: isErrorData, isLoading: isLoadingData } = useDataSelector();\r\n  const { data: metadata, isError: isErrorMetadata, isLoading: isLoadingMetadata } = useMetadataSelector();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const mapDictionaryCb = useCallback((value: string, key: string) => {\r\n    const metadataProperty = metadata?.find((property) => property.id === key);\r\n    if (metadataProperty && metadataProperty.type === 'multi-select' && dictionary[key]){\r\n      return value.split(',').map((v) => dictionary[key][v].text).join(', ')\r\n    } else if (metadataProperty && ['select', 'checkbox'].includes(metadataProperty.type)  && dictionary[key] && dictionary[key][value]) {\r\n      return dictionary[key][value].text\r\n    }\r\n    return value;\r\n  }, [metadata, dictionary])\r\n\r\n  useEffect(() => {\r\n    dispatch(dataGetAction(tablename));\r\n    dispatch(metadataGetAction(tablename));\r\n  }, [tablename, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (metadata) {\r\n      metadata\r\n        .filter((property) => ['select', 'multi-select', 'checkbox'].includes(property.type))\r\n        .forEach((property) => setDictionary(property.id, property.validValues))\r\n    }\r\n  }, [metadata, setDictionary]);\r\n\r\n  useEffect(() => {\r\n    if (sourceData && metadata && Object.keys(dictionary).length) {\r\n      setData(() => sourceData.map((d) => mapValues(d, mapDictionaryCb)));\r\n    }\r\n  }, [sourceData, metadata, dictionary, mapDictionaryCb]);\r\n\r\n  return {\r\n    data, isErrorData, isLoadingData,\r\n    metadata, isErrorMetadata, isLoadingMetadata\r\n  }\r\n}\r\n","import { List, Modal } from \"antd\";\r\n\r\ninterface IModalWithList {\r\n  title: string;\r\n  dataSource?: {title: string, description: string}[],\r\n  noDataText?: string,\r\n  avatar?: React.ReactNode,\r\n  width?: number,\r\n};\r\n\r\nconst ModalWithList = ({\r\n  title,\r\n  dataSource = [],\r\n  noDataText = 'Нет данных',\r\n  avatar,\r\n  width = 600,\r\n}: IModalWithList) => {\r\n  if (dataSource && dataSource.length) {\r\n    Modal.info({\r\n      title,\r\n      content: (\r\n        <List\r\n          dataSource={dataSource}\r\n          renderItem={(item) => (\r\n            <List.Item>\r\n              <List.Item.Meta\r\n                avatar={avatar}\r\n                // avatar={<CarryOutOutlined />}\r\n                title={item.title}\r\n                description={item.description.split('\\n').map((text) => <div>{text}</div>)}\r\n              />\r\n            </List.Item>\r\n          )}\r\n        />\r\n      ),\r\n      width: `${width}px`\r\n    });\r\n  } else {\r\n    Modal.info({\r\n      title,\r\n      content: noDataText,\r\n      width: `${width}px`\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default ModalWithList;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editable-cell\":\"TableEditableCell_editable-cell__LXwkw\",\"editable-cell-value-wrap\":\"TableEditableCell_editable-cell-value-wrap__1BVb7\",\"editable-row\":\"TableEditableCell_editable-row__2ctbF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"action-menu\":\"ActionMenu_action-menu__1Quqs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropdown-menu\":\"DropdownMenu_dropdown-menu__2hkVv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filter-button\":\"FilterPanel_filter-button__3r320\",\"reset-filter-button\":\"FilterPanel_reset-filter-button__3mx_s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"select-columns-button\":\"ColumnsPanel_select-columns-button__3wepJ\",\"reset-select-columns-button\":\"ColumnsPanel_reset-select-columns-button__2E4XD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"Table_table__3RMoX\",\"hidden-pagination\":\"Table_hidden-pagination__3y5Zo\",\"table-title\":\"Table_table-title__2Rdcb\",\"table-title-row-10\":\"Table_table-title-row-10__2UTBH\",\"table-title-row-20\":\"Table_table-title-row-20__3eD46\",\"table-title-row-30\":\"Table_table-title-row-30__2Zw_q\",\"table-title-row-40\":\"Table_table-title-row-40__3YZXE\",\"table-title-row-50\":\"Table_table-title-row-50__EDFiG\",\"table-title-row-60\":\"Table_table-title-row-60__1apef\",\"table-title-row-70\":\"Table_table-title-row-70__2xsdo\",\"table-title-row-80\":\"Table_table-title-row-80__3EVn2\",\"table-title-row-90\":\"Table_table-title-row-90__IyfPo\",\"table-title-row-100\":\"Table_table-title-row-100__29P3U\",\"table-title-row-110\":\"Table_table-title-row-110__2Qni0\",\"table-title-row-120\":\"Table_table-title-row-120__3zTSb\",\"table-title-row-130\":\"Table_table-title-row-130__lOny3\",\"table-title-row-140\":\"Table_table-title-row-140__1C6Fe\",\"table-title-row-150\":\"Table_table-title-row-150__1kRW3\",\"table-title-row-160\":\"Table_table-title-row-160__XAbUV\",\"table-title-row-170\":\"Table_table-title-row-170__1O8_m\",\"table-title-row-180\":\"Table_table-title-row-180__38rnB\",\"table-title-row-190\":\"Table_table-title-row-190__11sYK\",\"table-title-row-200\":\"Table_table-title-row-200__1rFw_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"center\":\"DataTable_center__-2FaP\"};","import sortData from './sortData';\r\nimport { TColumn } from '../types/TColumn';\r\nimport { TData } from '../types/TData';\r\n\r\ntype TMapMetadataToColumns = (\r\n  metadata: TData[],\r\n) => Record<string, TColumn>[]\r\n\r\nexport const mapMetadataToColumns: TMapMetadataToColumns = (metadata) => {\r\n  const columns = metadata\r\n    .filter((c) => c.id !== 'specificParameters')\r\n    .map((metadataColumn) => {\r\n      const column: TData = {\r\n        ...metadataColumn,\r\n        dataIndex: metadataColumn.id,\r\n        key: metadataColumn.id,\r\n        sorter: {\r\n          compare: sortData(metadataColumn.id, undefined, metadataColumn.type),\r\n          multiple: 1,\r\n        },\r\n      }\r\n\r\n      return column;\r\n    })\r\n    .sort((a, b) => a.tableIndex - b.tableIndex)\r\n    // .filter((c: any) => !filterRealColumns || (filterRealColumns && c.showInTable && c.type !== 'fulltext'))\r\n\r\n  return columns;\r\n}\r\n","import { createContext } from 'react';\r\nimport { Form } from 'antd';\r\nimport { FormInstance } from 'antd/lib/form';\r\n\r\nexport const EditableContext = createContext<FormInstance<any> | null>(null);\r\n\r\ninterface IEditableRowProps {\r\n  id: number;\r\n}\r\n\r\nconst DataTableEditableRow: React.FC<IEditableRowProps> = ({ id, ...props }) => {\r\n  const [form] = Form.useForm();\r\n  return (\r\n    <Form form={form} component={false}>\r\n      <EditableContext.Provider value={form}>\r\n        <tr {...props} />\r\n      </EditableContext.Provider>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default DataTableEditableRow;\r\n","import React from 'react';\r\nimport { Form, Input } from 'antd';\r\nimport classes from './TableEditableCell.module.scss';\r\n\r\ninterface Item {\r\n  key: string;\r\n  name: string;\r\n  age: string;\r\n  address: string;\r\n}\r\n\r\ninterface EditableCellProps {\r\n  title: React.ReactNode;\r\n  inputRef: React.RefObject<Input>;\r\n  editing: boolean;\r\n  editable: boolean;\r\n  children: React.ReactNode;\r\n  dataIndex: keyof Item;\r\n  record: Item;\r\n  handleSave: () => void;\r\n  handleToggleEdit: () => void;\r\n}\r\n\r\nconst TableEditableCell: React.FC<EditableCellProps> = ({\r\n  title,\r\n  inputRef,\r\n  editing,\r\n  editable,\r\n  children,\r\n  dataIndex,\r\n  record,\r\n  handleSave,\r\n  handleToggleEdit,\r\n  ...restProps\r\n}) => {\r\n  let childNode = children;\r\n\r\n  if (editable) {\r\n    childNode = editing ? (\r\n      <Form.Item\r\n        style={{ margin: 0 }}\r\n        name={ dataIndex }\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: `${title} is required.`,\r\n          },\r\n        ]}\r\n      >\r\n        <Input\r\n          ref={inputRef}\r\n          onPressEnter={handleSave}\r\n          onBlur={handleSave}\r\n        />\r\n      </Form.Item>\r\n    ) : (\r\n      <div\r\n        className={classes[\"editable-cell-value-wrap\"]}\r\n        style={{ paddingRight: 24 }}\r\n        onClick={handleToggleEdit}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <td {...restProps}>{childNode}</td>;\r\n};\r\n\r\nexport default TableEditableCell;\r\n","import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport { Input } from 'antd';\r\nimport { useDispatch } from 'react-redux';\r\nimport { EditableContext } from '../UI/TableEditableRow';\r\nimport { convertDataItem } from '../../utils/convertDataItem';\r\nimport { useGetTablename } from '../../utils/hooks/useGetTablename';\r\nimport { useDictionaryContext } from '../../context/DictionaryContext';\r\nimport { dataUpdateAction } from '../../storages/actions/data';\r\nimport { useMetadataSelector } from '../../storages/selectors/metadata';\r\nimport TableEditableCell from '../UI/TableEditableCell';\r\n\r\ninterface Item {\r\n  key: string;\r\n  name: string;\r\n  age: string;\r\n  address: string;\r\n}\r\n\r\nexport interface EditableCellProps {\r\n  title: React.ReactNode;\r\n  editable: boolean;\r\n  children: React.ReactNode;\r\n  dataIndex: keyof Item;\r\n  record: Item;\r\n  // handleSave: (record: Item) => void;\r\n  // tablename: string,\r\n}\r\n\r\nconst DataTableEditableCell: React.FC<EditableCellProps> = ({\r\n  title,\r\n  editable,\r\n  children,\r\n  dataIndex,\r\n  record,\r\n  // tablename,\r\n  ...restProps\r\n}) => {\r\n  const { dictionary } = useDictionaryContext();\r\n  const {data: metadata} = useMetadataSelector();\r\n  const tablename = useGetTablename();\r\n\r\n  const [editing, setEditing] = useState(false);\r\n  const inputRef = useRef<Input>(null);\r\n  const form = useContext(EditableContext)!;\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (editing) {\r\n      inputRef.current!.focus();\r\n    }\r\n  }, [editing]);\r\n\r\n  const handleToggleEdit = () => {\r\n    setEditing(!editing);\r\n    form.setFieldsValue({ [dataIndex]: record[dataIndex] });\r\n  };\r\n\r\n  const save = async () => {\r\n    try {\r\n      const values = await form.validateFields();\r\n\r\n      handleToggleEdit();\r\n      if (metadata) {\r\n        const data = { ...record, ...values };\r\n        dispatch(dataUpdateAction(tablename, convertDataItem(dictionary, data, metadata, 'table')));\r\n      }\r\n    } catch (errInfo) {\r\n      console.log('Save failed:', errInfo);\r\n    }\r\n  };\r\n\r\n  return <TableEditableCell\r\n    title={title}\r\n    editing={editing}\r\n    editable={editable}\r\n    children={children}\r\n    dataIndex={dataIndex}\r\n    record={record}\r\n    handleSave={save}\r\n    handleToggleEdit={handleToggleEdit}\r\n    inputRef={inputRef}\r\n    {...restProps}\r\n  />\r\n};\r\n\r\nexport default DataTableEditableCell;\r\n","import { ReactElement } from 'react';\r\nimport { TData } from '../../types/TData';\r\n\r\nconst TableExpandableRow = (key: keyof TData) => {\r\n  return {\r\n    rowExpandable: (record: TData): boolean => !!record[key],\r\n    expandedRowRender: (record: TData): ReactElement => {\r\n      return <p>{record[key]}</p>\r\n    }\r\n  }\r\n};\r\n\r\nexport default TableExpandableRow;","import { Tooltip } from 'antd';\r\nimport { FilterOutlined } from '@ant-design/icons';\r\n\r\nconst TableFilterIcon = (filtered: boolean) => {\r\n  return (\r\n    <Tooltip placement=\"topLeft\" title=\"Фильтровать\">\r\n      <FilterOutlined style={{ fontSize: '17px', color: filtered ? '#1890ff' : undefined }} />\r\n    </Tooltip>\r\n  );\r\n}\r\n\r\nexport default TableFilterIcon;","import { Modal } from 'antd';\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\r\n\r\ntype TConfirmModal = ({\r\n  onOk: () => void,\r\n  onCancel: () => void,\r\n  onFinally?: () => void,\r\n  description?: string,\r\n  okText?: string,\r\n});\r\n\r\nconst { confirm  } = Modal;\r\n\r\nconst showConfirmModal = ({ onOk, onCancel, onFinally, description, okText }: TConfirmModal) => {\r\n  const handleOk = () => {\r\n    onOk();\r\n    if (onFinally && typeof onFinally === 'function') onFinally();\r\n  }\r\n\r\n  const handleCancel = () => {\r\n    onCancel();\r\n    if (onFinally && typeof onFinally === 'function') onFinally();\r\n  }\r\n\r\n  confirm({\r\n    title: 'Вы подтверждаете действие ?',\r\n    icon: <ExclamationCircleOutlined />,\r\n    content: description,\r\n    okText: okText || 'Удалить',\r\n    okType: 'danger',\r\n    cancelText: 'Отмена',\r\n    onOk: handleOk,\r\n    onCancel: handleCancel,\r\n  });\r\n}\r\n\r\nexport default showConfirmModal;","import { Modal } from 'antd';\r\nimport {\r\n  BellOutlined,\r\n  DeleteFilled,\r\n  EditFilled,\r\n  ScheduleOutlined,\r\n  ScheduleFilled\r\n} from '@ant-design/icons';\r\nimport showConfirmModal from '../Modals/ConfirmModal';\r\nimport { TActionBody } from \"../../types/TApiActionBody\";\r\nimport { TData } from \"../../types/TData\";\r\nimport { TDropdownMenu } from \"../../types/TDropdownMenu\";\r\nimport { TTableParameters } from \"../../types/TTableParameters\";\r\nimport classes from './ActionMenu.module.scss';\r\nimport { TDictionary } from '../../types/TDictionary';\r\nimport { convertDataItem } from '../../utils/convertDataItem';\r\n// import { TObject } from '../../types/TObject';\r\n\r\ntype TModals = 'editItem' | 'addDiscussion' | 'deleteItem';\r\n\r\ninterface IMenu {\r\n  dataItem: TData;\r\n  metadata: TData[] | null;\r\n  tableParameters: TTableParameters;\r\n  handleOpen: (t: TModals) => void;\r\n  handleEdit: (data: TActionBody) => void;\r\n  handleDelete: (data: TActionBody) => void;\r\n  handleGetConnectedData: (data: TActionBody) => void;\r\n  dictionary: TDictionary;\r\n}\r\n\r\nconst handleDummyClick = () => {\r\n  Modal.info({\r\n    title: 'Информирование',\r\n    content: 'Тестовое уведомление было отправлено'\r\n  })\r\n};\r\n\r\nexport const createActions = ({\r\n    dataItem,\r\n    metadata,\r\n    tableParameters,\r\n    handleOpen,\r\n    handleEdit,\r\n    handleDelete,\r\n    handleGetConnectedData,\r\n    dictionary,\r\n  }: IMenu) => {\r\n  const actions: TDropdownMenu[] = [];\r\n\r\n  if (tableParameters.hasDiscussion) {\r\n    const handleOpenAddDiscussion = () => {\r\n      handleOpen('addDiscussion');\r\n    }\r\n\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-add-discussion`,\r\n      onClick: handleOpenAddDiscussion,\r\n      icon: <ScheduleOutlined className={classes['action-menu']}/>,\r\n      title: 'Добавить обсуждение',\r\n    });\r\n\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-show-discussions`,\r\n      onClick: () => handleGetConnectedData(dataItem),\r\n      icon: <ScheduleFilled className={classes['action-menu']}/>,\r\n      title: 'Проведённые обсуждения',\r\n    });\r\n    actions.push({ type: 'divider', key: 'divider-discussion' });\r\n  }\r\n\r\n  if (tableParameters.hasEditMenu) {\r\n    const handleOpenEditMenu = () => {\r\n      handleOpen('editItem');\r\n    }\r\n\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-edit`,\r\n      onClick: handleOpenEditMenu,\r\n      icon: <EditFilled className={classes['action-menu']} />,\r\n      title: 'Редактировать',\r\n    });\r\n  }\r\n\r\n  if (tableParameters.hasSetStatusMenu && metadata) {\r\n    actions.push({\r\n      type: 'submenu',\r\n      key: `action-menu-${dataItem.key}-status`,\r\n      title: 'Изменить статус',\r\n      items: Object.entries(dictionary?.status).map(([statusKey, statusInfo]) => {\r\n        const values = convertDataItem(dictionary, dataItem, metadata, 'table');\r\n\r\n        return ({\r\n          key: `action-menu-status-${statusKey}`,\r\n          title: statusInfo.text,\r\n          onClick: () => {\r\n            values.status = statusKey;\r\n            handleEdit(values);\r\n          },\r\n        })\r\n      })\r\n    });\r\n  }\r\n\r\n  if (tableParameters.hasDeleteButton) {\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-delete`,\r\n      onClick: () => {\r\n        showConfirmModal({\r\n          onOk: () => handleDelete(dataItem),\r\n          onCancel: () => console.log(''),\r\n          description: 'Вы подтверждаете удаление данных ?',\r\n        });\r\n      },\r\n      icon: <DeleteFilled className={classes['action-menu']} />,\r\n      title: 'Удалить',\r\n    });\r\n  }\r\n\r\n  if (tableParameters.hasNotificationButton) {\r\n    actions.push({ type: 'divider', key: 'divider-notification' });\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-notify`,\r\n      onClick: handleDummyClick,\r\n      icon: <BellOutlined className={classes['action-menu']} />,\r\n      title: 'Отправить уведомление',\r\n    });\r\n  }\r\n\r\n  return actions;\r\n}\r\n","import React from \"react\";\r\nimport { Menu } from 'antd';\r\nimport { TDropdownMenu } from '../../../types/TDropdownMenu';\r\nimport classes from './DropdownMenu.module.scss';\r\nimport './DropdownMenu.css';\r\n\r\nconst DropdownMenu: React.FC<{menuItems: TDropdownMenu[]}> = ({ menuItems }) => {\r\n  return (\r\n    <Menu\r\n      className={classes['dropdown-menu']}\r\n      defaultSelectedKeys={[]}\r\n      selectedKeys={[]}\r\n      activeKey=\"something\"\r\n    >\r\n      {\r\n        menuItems.map((menuItem, index) => (\r\n          menuItem.type === 'divider' ? (\r\n            <Menu.Divider key={`divider-${index}`}/>\r\n          ) : (\r\n            menuItem.type === 'submenu' ? (\r\n              <Menu.SubMenu\r\n                key={menuItem.key}\r\n                title={menuItem.title}\r\n              >\r\n                {\r\n                  menuItem.items && menuItem.items.map((subMenuItem) => (\r\n                    <Menu.Item\r\n                      key={subMenuItem.key}\r\n                      onClick={subMenuItem.onClick}\r\n                      icon={subMenuItem.icon}\r\n                    >\r\n                      {subMenuItem.title}\r\n                    </Menu.Item>\r\n                  ))\r\n                }\r\n              </Menu.SubMenu>\r\n            ) : (\r\n              <Menu.Item\r\n                key={menuItem.key}\r\n                onClick={menuItem.onClick}\r\n                icon={menuItem.icon}\r\n              >\r\n                {menuItem.title}\r\n              </Menu.Item>\r\n            ))\r\n          )\r\n        )\r\n      }\r\n    </Menu>\r\n  )\r\n}\r\n\r\nexport default DropdownMenu;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useMetadataSelector } from '../../../storages/selectors/metadata';\r\nimport { getTableParameters } from '../../../utils/getTableParameters';\r\nimport { convertDataItem } from '../../../utils/convertDataItem';\r\nimport { IFormItem } from '../../../types/IFormItem';\r\nimport { TData } from '../../../types/TData';\r\nimport { TButton } from '../../../types/TButton';\r\nimport { useDictionaryContext } from '../../../context/DictionaryContext';\r\nimport ModalWithForm from '../../UI/ModalWithForm';\r\n\r\ninterface IDataEditModal {\r\n  isOpen: boolean;\r\n  onEditHandler: (data: TData) => void;\r\n  onAddHandler?: (data: TData) => void;\r\n  onClose: () => void;\r\n  formData: TData;\r\n}\r\n\r\nconst DataEditModal: React.FC<IDataEditModal> = ({\r\n  isOpen,\r\n  onEditHandler,\r\n  onAddHandler,\r\n  onClose,\r\n  formData\r\n}) => {\r\n  const { dictionary } = useDictionaryContext();\r\n\r\n  const { data: metadata, isError, isLoading } = useMetadataSelector();\r\n\r\n  const [formItems, setFormItems] = useState<IFormItem[]>([]);\r\n  const [initialValues, setInitialValues] = useState<TData>(formData);\r\n\r\n  useEffect(() => {\r\n    if (formItems && formData && metadata) {\r\n      setInitialValues(convertDataItem(dictionary, formData, metadata, 'modalEdit'));\r\n    }\r\n  }, [formData, formItems, dictionary, metadata]);\r\n\r\n  useEffect(() => {\r\n    if (metadata) {\r\n      setFormItems(metadata\r\n        .filter((m) => m.id !== 'specificParameters')\r\n        .sort((a, b) => a.tableIndex - b.tableIndex)\r\n        .map((m) => {\r\n          return {\r\n            label: m.title,\r\n            name: m.id,\r\n            type: m.type,\r\n            // rules: m.addMenuIndex ? [{ required: true, message: 'Поле должно быть корректно заполнено!' }] : [],\r\n            rules: [],\r\n            disabled: !m.isEditable,\r\n          }\r\n      }));\r\n    }\r\n  }, [ metadata ]);\r\n\r\n  return (\r\n    metadata && !isError && !isLoading ? (\r\n      <ModalWithForm\r\n        title={getTableParameters(metadata).addMenuTitle || 'Добавить'}\r\n        okButtonTitle='Сохранить'\r\n        isOpen={isOpen}\r\n        handleOk={onEditHandler}\r\n        handleClose={onClose}\r\n        formItems={formItems}\r\n        initialValues={initialValues}\r\n        additionalButtons={[\r\n          {\r\n            onClick: onAddHandler,\r\n            title: 'Сохранить как новый'\r\n          } as TButton\r\n        ]}\r\n      />\r\n    ) : null\r\n  );\r\n};\r\n\r\nexport default DataEditModal;\r\n","import { useCallback, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Dropdown, Tooltip } from 'antd';\r\nimport { CarryOutOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport { urlApi } from '../../constants/constants';\r\nimport { TData } from '../../types/TData';\r\nimport { TTableParameters } from '../../types/TTableParameters';\r\nimport { TActionBody } from '../../types/TApiActionBody';\r\nimport { IFetchError } from '../../types/IFetchError';\r\nimport { useMetadataSelector } from '../../storages/selectors/metadata';\r\nimport { dataAddAction, dataDeleteAction, dataUpdateAction } from '../../storages/actions/data';\r\nimport { createActions } from './createActions';\r\nimport DropdownMenu from '../UI/DropdownMenu';\r\nimport Notification from '../UI/Notification';\r\nimport ModalWithList from '../UI/ModalWithList';\r\nimport DataEditModal from '../Modals/DataEditModal';\r\nimport DataAddModal from '../Modals/DataAddModal';\r\nimport { useDictionaryContext } from '../../context/DictionaryContext';\r\n\r\ntype TModals = 'editItem' | 'addDiscussion' | 'deleteItem';\r\n\r\ntype TActionMenu = {\r\n  title: string,\r\n  dataItem: TData,\r\n  tableParameters: TTableParameters,\r\n  tablename: string,\r\n};\r\n\r\nconst ActionMenu: React.FC<TActionMenu> = ({dataItem, title, tableParameters, tablename}) => {\r\n  const { dictionary } = useDictionaryContext();\r\n\r\n  const [openModal, setOpenModal] = useState<TModals>();\r\n\r\n  const { data: metadata } = useMetadataSelector();\r\n\r\n  const handleClose = () => setOpenModal(undefined);\r\n  const handleOpen = (t: TModals) => {\r\n    setOpenModal(t);\r\n  }\r\n\r\n  const handleEdit = (data: TActionBody) => dispatch(dataUpdateAction(tablename, data));\r\n  const handleDelete = (data: TActionBody) => dispatch(dataDeleteAction(tablename, data));\r\n  const handleAdd = (data: TActionBody) => {\r\n    delete data.id;\r\n    dispatch(dataAddAction(tablename, data));\r\n  }\r\n\r\n  const handleAddDiscussion = (data: TActionBody) => {\r\n    dispatch(dataAddAction('discussion', data));\r\n  }\r\n\r\n  const connectedTablename = 'discussion';\r\n  const handleGetConnectedData = useCallback(async (data: TActionBody) => {\r\n    try {\r\n      const response = await axios.get(`${urlApi}/${tablename}/get-${connectedTablename}/${data.id}`);\r\n\r\n      ModalWithList({\r\n        title: 'Обсуждения',\r\n        avatar: <CarryOutOutlined />,\r\n        dataSource: response.data as {title: string, description: string}[],\r\n        noDataText: 'Ранее обсуждений не проводилось',\r\n      });\r\n    } catch (error) {\r\n      Notification({\r\n        type: 'error',\r\n        message: 'Ошибка при загрузке данных',\r\n        description: (error as IFetchError).message\r\n          ? (error as IFetchError).message\r\n          : (error as IFetchError).statusText,\r\n      });\r\n    }\r\n  }, [tablename]);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const actions = createActions({\r\n    dataItem,\r\n    dictionary,\r\n    metadata,\r\n    tableParameters,\r\n    handleOpen,\r\n    handleDelete,\r\n    handleEdit,\r\n    handleGetConnectedData,\r\n  });\r\n\r\n  return (\r\n    actions.length ? (\r\n      <>\r\n        <DataEditModal\r\n          isOpen={openModal === 'editItem'}\r\n          onEditHandler={handleEdit}\r\n          onAddHandler={handleAdd}\r\n\r\n          onClose={handleClose}\r\n          formData={dataItem}\r\n        />\r\n\r\n        <DataAddModal\r\n          isOpen={openModal === 'addDiscussion'}\r\n          onAddHandler={handleAddDiscussion}\r\n          onClose={handleClose}\r\n          modalTablename='discussion'\r\n          modalInitialValues={{\r\n            theme: dataItem.text,\r\n            mainQuestions: dataItem.description\r\n          }}\r\n        />\r\n\r\n        <Tooltip placement='topRight' title={title}>\r\n          <Dropdown.Button\r\n            overlay={<DropdownMenu menuItems={actions} />}\r\n            trigger={['click']}\r\n          />\r\n        </Tooltip>\r\n      </>\r\n    ) : null\r\n  );\r\n};\r\n\r\nexport default ActionMenu;\r\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { ConfigProvider, Pagination, Table, Tag } from 'antd';\r\nimport { SortOrder } from 'antd/lib/table/interface';\r\nimport ruRU from 'antd/lib/locale/ru_RU';\r\nimport { TData } from '../../../types/TData';\r\nimport { TDictionary } from '../../../types/TDictionary';\r\nimport { TTableParameters } from '../../../types/TTableParameters';\r\nimport { TObject } from '../../../types/TObject';\r\nimport TableEditableRow from '../TableEditableRow';\r\nimport DataTableEditableCell from '../../TableEditableCell';\r\nimport TableExpandableRow from '../TableExpandableRow';\r\nimport TableFilterIcon from '../TableFilterIcon';\r\nimport ActionMenu from '../../ActionMenu';\r\nimport { usePrintPDFContext } from '../../../context/PrintPDFContext';\r\nimport { useFilterDrawer } from '../FilterPanel';\r\nimport { useColumnsDrawer } from '../ColumnsPanel';\r\nimport classes from './Table.module.scss';\r\nimport './Table.css';\r\n\r\ntype TTableProps = {\r\n  data: TData[],\r\n  columns: TData[],\r\n  tableParameters: TTableParameters,\r\n  tablename: string,\r\n  dictionary: TDictionary\r\n  invertDictionary: TObject<Record<string, string>>\r\n};\r\n\r\nconst PAGE_SIZE = 10;\r\n\r\nconst DataTable: React.FC<TTableProps> = ({\r\n  data,\r\n  columns,\r\n  tableParameters,\r\n  tablename,\r\n  dictionary,\r\n  invertDictionary\r\n}) => {\r\n  const { setDataPrintRef, setDataPrintMode, dataPrintMode } = usePrintPDFContext();\r\n  const dataRef = useRef<HTMLDivElement>(null)\r\n  const [page, setPage] = useState<number>(1);\r\n  const [pageSize, setPageSize] = useState<number>(PAGE_SIZE);\r\n\r\n  const hasActionMenu = tableParameters.hasActionMenu;\r\n\r\n  useEffect(() => {\r\n    if (dataRef) setDataPrintRef(dataRef)\r\n  }, [setDataPrintRef]);\r\n\r\n  const sourceData = useMemo(() => {\r\n    return data.map((dataItem, index) => {\r\n      return {\r\n        ...dataItem,\r\n        key: `table-row-${dataItem.id}-${index}`,\r\n        action: hasActionMenu\r\n        ? <ActionMenu\r\n            key={`action-menu-${dataItem.id}-${index}`}\r\n            title='Меню действий'\r\n            dataItem={dataItem}\r\n            tableParameters={tableParameters}\r\n            tablename={tablename}\r\n          />\r\n        : null\r\n      }\r\n    })\r\n  }, [data, tableParameters, hasActionMenu, tablename])\r\n\r\n  const getDefaultSorter = (field: string) => {\r\n    if (Array.isArray(tableParameters.defaultSortField)) {\r\n      const index = tableParameters.defaultSortField.indexOf(field);\r\n\r\n      return index < 0\r\n        ? undefined\r\n        : (tableParameters.defaultSortDirection as string[])[index];\r\n    }\r\n    return field === tableParameters.defaultSortField\r\n      ? tableParameters.defaultSortDirection\r\n      : undefined;\r\n  }\r\n\r\n  const {\r\n    ColumnsPanelButtons,\r\n    ColumnsPanel,\r\n    columnsData\r\n  } = useColumnsDrawer(columns);\r\n\r\n  const tableColumns: TData[] = columnsData\r\n    .map((column) => {\r\n      return !column.isInlineEditable\r\n        ? {\r\n            ...column,\r\n            defaultSortOrder: (getDefaultSorter(column.dataIndex)) as SortOrder,\r\n            sortOrder: (getDefaultSorter(column.dataIndex)) as SortOrder,\r\n            filterIcon: TableFilterIcon,\r\n            render: (text: string, record: TData) => {\r\n              const columnId = column.dataIndex;\r\n              const tableValue = record[columnId];\r\n              const originalValue = invertDictionary[columnId] && invertDictionary[columnId][tableValue]\r\n                ? invertDictionary[columnId][tableValue]\r\n                : tableValue;\r\n\r\n              return column.isTagged\r\n                ? <Tag color={dictionary[columnId][originalValue]?.tag}>{text}</Tag>\r\n                : text\r\n            }\r\n          }\r\n          : {\r\n            ...column,\r\n            defaultSortOrder: (getDefaultSorter(column.dataIndex)) as SortOrder,\r\n            sortOrder: (getDefaultSorter(column.dataIndex)) as SortOrder,\r\n            filterIcon: TableFilterIcon,\r\n            onCell: (record: any) => ({\r\n              record,\r\n              editable: column.isInlineEditable,\r\n              dataIndex: column.dataIndex,\r\n              title: column.title,\r\n            }),\r\n          }\r\n      }\r\n    )\r\n\r\n  if (hasActionMenu) tableColumns.push({\r\n    dataIndex: 'action',\r\n    key: 'action',\r\n    isInlineEditable: false,\r\n    showInTable: true,\r\n    type: 'action',\r\n    className: 'table-action-column',\r\n  })\r\n\r\n  tableColumns.forEach((tableColumn) => {\r\n    if (tableColumn.dataIndex !== 'action') {\r\n      tableColumn.className = classes[`table-title-row-${Math.ceil(((tableColumn.title?.length ?? 1)*7 + 48)/10)*10}`];\r\n    }\r\n  })\r\n\r\n  const {\r\n    FilterButtons,\r\n    FilterPanel,\r\n    filterData\r\n  } = useFilterDrawer(columnsData, sourceData);\r\n\r\n  const handleChangePage = useCallback((nextPage: number, pageSize: number) => {\r\n    setPage(nextPage);\r\n    setPageSize(pageSize);\r\n  }, [])\r\n\r\n  const TableTitle = useCallback(() => (\r\n    <div className={classes['table-title']}>\r\n      <div>\r\n        {FilterButtons}\r\n\r\n        {ColumnsPanelButtons}\r\n      </div>\r\n\r\n      <Pagination\r\n        showSizeChanger\r\n        current={page}\r\n        pageSize={pageSize}\r\n        onChange={handleChangePage}\r\n        total={(filterData || []).length}\r\n      />\r\n    </div>\r\n  ), [\r\n    FilterButtons,\r\n    ColumnsPanelButtons,\r\n    filterData,\r\n    page,\r\n    pageSize,\r\n    handleChangePage\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (dataPrintMode === 'all') {\r\n      setPageSize(0);\r\n      setDataPrintMode('print');\r\n    } else if (dataPrintMode === 'current') {\r\n    } else {\r\n      setPageSize(PAGE_SIZE);\r\n    }\r\n  }, [filterData, pageSize, dataPrintMode, setDataPrintMode])\r\n\r\n  return (\r\n    // <>\r\n    <ConfigProvider locale={ruRU}>\r\n      {FilterPanel}\r\n\r\n      {ColumnsPanel}\r\n\r\n      <Table\r\n        ref={dataRef}\r\n        dataSource={ filterData }\r\n        columns={ tableColumns }\r\n        title={TableTitle}\r\n        // scroll={{x: 'max-content'}}\r\n        tableLayout='auto'\r\n        components={{\r\n          body: {\r\n            row: TableEditableRow,\r\n            cell: DataTableEditableCell\r\n          },\r\n        }}\r\n        rowClassName={() => 'editable-row'}\r\n        bordered={ false }\r\n        loading={ false }\r\n        size='large'\r\n        expandable={ TableExpandableRow('description') }\r\n        // expandIcon\r\n        sticky={ true }\r\n        pagination={{\r\n          position: ['topRight'],\r\n          pageSize: pageSize,\r\n          current: page,\r\n          total: filterData.length,\r\n          className: classes['hidden-pagination']\r\n        }}\r\n        className={ classes.table }\r\n      />\r\n    </ConfigProvider>\r\n    // </>\r\n  );\r\n}\r\n\r\nexport default DataTable;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\"\r\nimport { Button, Drawer, Tooltip, Form, Checkbox } from \"antd\";\r\nimport { OrderedListOutlined } from '@ant-design/icons';\r\nimport { TData } from \"../../../types/TData\";\r\nimport { IFormItem } from \"../../../types/IFormItem\";\r\nimport classes from './ColumnsPanel.module.scss';\r\n\r\nexport const useColumnsDrawer = (metadata: TData[], initialVisible: boolean = false) => {\r\n  const [columnsData, setColumnsData] = useState<TData[]>([]);\r\n  const [visible, setVisible] = useState<boolean>(initialVisible);\r\n  const [form] = Form.useForm();\r\n\r\n  useEffect(() => {\r\n    if (metadata) setColumnsData(metadata)\r\n  }, [metadata]);\r\n\r\n  const openPanel = useCallback(() => setVisible(true), []);\r\n  const closePanel = useCallback(() => setVisible(false), []);\r\n\r\n  const resetColumns = useCallback(() => {\r\n    setColumnsData(metadata);\r\n    form.setFields(metadata.map(({dataIndex, showInTable}) => ({\r\n      name: dataIndex,\r\n      value: showInTable,\r\n    })));\r\n  }, [form, metadata]);\r\n\r\n  const handleSubmit = useCallback((values: any) => {\r\n    setColumnsData((prev) => {\r\n      return prev.map((columnData) => {\r\n        return {\r\n          ...columnData,\r\n          showInTable: values[columnData.dataIndex] ?? false\r\n        }\r\n      })\r\n    });\r\n    closePanel();\r\n  }, [closePanel]);\r\n\r\n  const ColumnsPanelButtons = useMemo<JSX.Element>(() => (\r\n    <Tooltip\r\n      placement='topRight'\r\n      title='Выбрать колонки'\r\n    >\r\n      <Button\r\n        onClick={openPanel}\r\n        className={classes['select-columns-button']}\r\n        icon={<OrderedListOutlined style={{ fontSize: '20px' }}/>}\r\n      />\r\n    </Tooltip>\r\n  ), [openPanel]);\r\n\r\n  const ColumnsPanel = useMemo(() => (\r\n    <Drawer\r\n      title='Колонки'\r\n      placement=\"right\"\r\n      onClose={closePanel}\r\n      visible={visible}\r\n      width={250}\r\n    >\r\n      <Form\r\n        name='basic'\r\n        preserve={false}\r\n        labelCol={{ span: 20 }}\r\n        wrapperCol={{ span: 4 }}\r\n        onFinish={handleSubmit}\r\n        onFinishFailed={console.log}\r\n        form={form}\r\n      >\r\n        <Form.Item wrapperCol={{ span: 24 }}>\r\n          <Button onClick={resetColumns} style={{width: '100%'}}>По умолчанию</Button>\r\n        </Form.Item>\r\n\r\n        {\r\n          columnsData\r\n            .map((columnData: TData) => {\r\n              const formItem: IFormItem = {\r\n                name: columnData.dataIndex,\r\n                label: columnData.title,\r\n                type: columnData.type,\r\n                disabled: false,\r\n              }\r\n\r\n              return (\r\n                <Form.Item\r\n                  key={formItem.name}\r\n                  label={formItem.label}\r\n                  name={formItem.name}\r\n                  valuePropName=\"checked\"\r\n                  initialValue={columnData.showInTable}\r\n                  style={{marginBottom: '12px'}}\r\n                >\r\n                  <Checkbox value={true}/>\r\n                </Form.Item>\r\n              );\r\n            })\r\n        }\r\n\r\n        <Form.Item wrapperCol={{ span: 24 }} style={{marginTop: '30px'}}>\r\n          <Button type=\"primary\" htmlType=\"submit\" style={{width: '100%'}}>Применить</Button>\r\n        </Form.Item>\r\n\r\n      </Form>\r\n    </Drawer>\r\n  ), [\r\n    form,\r\n    columnsData,\r\n    visible,\r\n    closePanel,\r\n    resetColumns,\r\n    handleSubmit,\r\n  ]);\r\n\r\n  const data = useMemo(() => (columnsData ?? []).filter((d) => d.showInTable), [columnsData]);\r\n\r\n  return {\r\n    ColumnsPanelButtons,\r\n    ColumnsPanel,\r\n    columnsData: data\r\n  };\r\n}\r\n","import { useCallback, useMemo, useState } from \"react\"\r\nimport {\r\n  Button,\r\n  Drawer,\r\n  Tooltip,\r\n  Form,\r\n  Input,\r\n  Select,\r\n  DatePicker,\r\n  TimePicker,\r\n  Col,\r\n  Row,\r\n  Checkbox\r\n} from \"antd\";\r\nimport { FilterOutlined, FilterFilled } from '@ant-design/icons';\r\nimport { TData } from \"../../../types/TData\";\r\nimport { IFormItem } from \"../../../types/IFormItem\";\r\nimport { useDictionaryContext } from \"../../../context/DictionaryContext\";\r\nimport classes from './FilterPanel.module.scss';\r\n\r\nexport const useFilterDrawer = (tableColumns: TData[], sourceData: TData[], initialVisible = false) => {\r\n  const { dictionary } = useDictionaryContext();\r\n\r\n  const [visibleResetButton, setVisibleResetButton] = useState<boolean>(false);\r\n  const [filterData, setFilterData] = useState<TData[]>();\r\n  const [visible, setVisible] = useState<boolean>(initialVisible);\r\n  const [form] = Form.useForm();\r\n\r\n  const openPanel = useCallback((e: any) => {\r\n    setVisible(true);\r\n  }, []);\r\n\r\n  const closePanel = useCallback(() => {\r\n    setVisible(false);\r\n  }, []);\r\n\r\n  const data = useMemo(() => filterData ?? sourceData, [filterData, sourceData]);\r\n\r\n  const handleReset = useCallback(() => {\r\n    setFilterData(sourceData);\r\n    setVisibleResetButton(false);\r\n    form.resetFields();\r\n  }, [sourceData, form]);\r\n\r\n  const handleSubmit = useCallback((values: any) => {\r\n    setVisibleResetButton(false);\r\n    setFilterData(sourceData\r\n      .filter((data: TData) => {\r\n        return Object.keys(data).reduce((acc, key) => {\r\n          let value = dictionary && dictionary[key] ? dictionary[key][values[key]].text : values[key];\r\n          if (typeof data[key] === 'number') value = +value;\r\n          if (typeof data[key] === 'boolean') value = !!value;\r\n          if (value) setVisibleResetButton(true);\r\n          return acc\r\n            && (\r\n                (typeof data[key] === 'boolean' && data[key] === value) ||\r\n                (!value && typeof data[key] !== 'boolean') ||\r\n                (value && data[key] && data[key] === value)\r\n              )\r\n        }, true)\r\n      })\r\n    )\r\n    closePanel();\r\n  }, [dictionary, sourceData, closePanel]);\r\n\r\n  const FilterButtons = useMemo<JSX.Element>(() => (\r\n    <div>\r\n      <Tooltip\r\n        placement='topRight'\r\n        title='Показать фильтры'\r\n      >\r\n        <Button\r\n          onClick={openPanel}\r\n          className={classes['filter-button']}\r\n        >\r\n          {\r\n            visibleResetButton ?\r\n            <FilterFilled style={{ fontSize: '20px' }}/> :\r\n            <FilterOutlined style={{ fontSize: '20px' }}/>\r\n          }\r\n        </Button>\r\n      </Tooltip>\r\n      <Button\r\n        onClick={handleReset}\r\n        className={classes['reset-filter-button']}\r\n        style={{display: visibleResetButton ? 'inline' : 'none'}}\r\n      >\r\n        Сбросить фильтры\r\n      </Button>\r\n    </div>\r\n  ), [openPanel, handleReset, visibleResetButton]);\r\n\r\n  const FilterPanel = useMemo(() => (\r\n    <Drawer\r\n      title='Фильтры'\r\n      placement=\"right\"\r\n      onClose={closePanel}\r\n      visible={visible}\r\n      width={430}\r\n    >\r\n      <Form\r\n        name='basic'\r\n        preserve={false}\r\n        labelCol={{ span: 8 }}\r\n        wrapperCol={{ span: 16 }}\r\n        // initialValues={initialValues ? initialValues : {}}\r\n        onFinish={handleSubmit}\r\n        form={form}\r\n      >\r\n        {\r\n          tableColumns\r\n            .filter((tableColumn) => tableColumn.isFilter)\r\n            .map((tableColumn: TData) => {\r\n              const formItem: IFormItem = {\r\n                name: tableColumn.dataIndex,\r\n                label: tableColumn.title,\r\n                type: tableColumn.type,\r\n                disabled: false\r\n              }\r\n\r\n              return (\r\n                <Form.Item\r\n                  key={formItem.name}\r\n                  label={formItem.label}\r\n                  name={formItem.name}\r\n                  valuePropName={formItem.type === 'checkbox' ? 'checked' : 'value'}\r\n                >\r\n                  {\r\n                    (['string', 'number'].includes(formItem.type)) ?\r\n                      <Input /> :\r\n                    formItem.type === 'fulltext' ?\r\n                      <Input.TextArea /> :\r\n                    formItem.type === 'checkbox' ?\r\n                      <Checkbox value={true} /> :\r\n                    (['select', 'multi-select'].includes(formItem.type)) && dictionary[formItem.name] ? (\r\n                      <Select\r\n                        allowClear\r\n                        filterOption={(value: string, option) => RegExp(value, 'i').test(`${option?.label}`)}\r\n                        mode={formItem.type === 'multi-select' ? 'multiple' : undefined}\r\n                        showSearch\r\n                        options={Object.entries(dictionary[formItem.name]).map(([value, info]) => (\r\n                          { value, label: info.text }\r\n                        ))}\r\n                      />\r\n                    ) :\r\n                    formItem.type === 'date' ?\r\n                      <DatePicker format=\"YYYY-MM-DD\" /> :\r\n                    formItem.type === 'datetime' ?\r\n                      <DatePicker format=\"YYYY-MM-DD HH:mm:ss\" showTime /> :\r\n                    formItem.type === 'time' ?\r\n                      <TimePicker format=\"HH:mm:ss\" /> :\r\n                    null\r\n                  }\r\n                </Form.Item>\r\n              );\r\n            })\r\n        }\r\n\r\n        <Form.Item wrapperCol={{ span: 24 }} style={{marginTop: '50px'}}>\r\n          <Row>\r\n            <Col span={12}>\r\n              <Button onClick={handleReset}>Сбросить</Button>\r\n            </Col>\r\n            <Col span={12} style={{textAlign: 'right'}}>\r\n              <Button type=\"primary\" htmlType=\"submit\">Применить</Button>\r\n            </Col>\r\n          </Row>\r\n        </Form.Item>\r\n      </Form>\r\n    </Drawer>\r\n  ), [\r\n    form,\r\n    dictionary,\r\n    tableColumns,\r\n    visible,\r\n    closePanel,\r\n    handleReset,\r\n    handleSubmit,\r\n  ]);\r\n\r\n  return {\r\n    FilterButtons,\r\n    FilterPanel,\r\n    filterData: data\r\n  };\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Typography } from 'antd';\r\nimport { TTableParameters } from '../../types/TTableParameters';\r\nimport { mapMetadataToColumns } from '../../utils/mapMetadataToColumns';\r\nimport { useGetDataMeta } from '../../utils/hooks/useGetDataMeta';\r\nimport { getTableParameters } from '../../utils/getTableParameters';\r\nimport { useGetTablename } from '../../utils/hooks/useGetTablename';\r\nimport Table from '../UI/Table';\r\nimport LoadingComponent from '../UI/LoadingComponent';\r\nimport { useDictionaryContext } from '../../context/DictionaryContext';\r\nimport classes from './DataTable.module.scss';\r\n\r\nconst { Title } = Typography;\r\n\r\nconst DataTable: React.FC = () => {\r\n  const [tableParameters, setTableParameters] = useState<TTableParameters | null>(null);\r\n\r\n  const tablename = useGetTablename();\r\n  const { dictionary, invertDictionary } = useDictionaryContext();\r\n\r\n  const {\r\n    data: sourceData, isErrorData, isLoadingData,\r\n    metadata, isErrorMetadata, isLoadingMetadata\r\n  } = useGetDataMeta(tablename);\r\n\r\n  useEffect(() => {\r\n    if (metadata) {\r\n      setTableParameters(getTableParameters(metadata));\r\n    }\r\n  }, [metadata]);\r\n\r\n  return (\r\n    isLoadingData || isLoadingMetadata ? (\r\n      <div className={classes.center}>\r\n        <LoadingComponent />\r\n      </div>\r\n    ) : (\r\n      (isErrorData || isErrorMetadata) && !sourceData ? (\r\n        <div className={classes.center}>\r\n          <Title level={3}>Ошибка получения данных</Title>\r\n        </div>\r\n      ) : (\r\n        sourceData && metadata && tableParameters &&\r\n          <Table\r\n            data={sourceData}\r\n            columns={mapMetadataToColumns(metadata)}\r\n            tableParameters={tableParameters}\r\n            tablename={tablename}\r\n            dictionary={dictionary}\r\n            invertDictionary={invertDictionary}\r\n          />\r\n      )\r\n    )\r\n  )\r\n}\r\n\r\nexport default DataTable\r\n"],"sourceRoot":""}