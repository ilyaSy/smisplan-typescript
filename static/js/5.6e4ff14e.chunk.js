(this["webpackJsonpsmisplan-typescript"]=this["webpackJsonpsmisplan-typescript"]||[]).push([[5],{339:function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ascend",n=arguments.length>2?arguments[2]:void 0;return function(a,i){var c=n&&"number"===n?+a[e]:a[e],l=n&&"number"===n?+i[e]:i[e];return c<l?"ascend"===t?-1:1:c>l?"ascend"===t?1:-1:0}}},340:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(4),i=n(0),c=n(151),l=n(56),r=n(154),o=n(147),s=n(148),u=n(152),b=n(70),d=function(e){var t=Object(i.useState)([]),n=Object(a.a)(t,2),d=n[0],j=n[1],f=Object(b.b)(),O=f.dictionary,m=f.setDictionary,p=Object(r.a)(),h=p.data,x=p.isError,v=p.isLoading,y=Object(o.a)(),_=y.data,w=y.isError,k=y.isLoading,g=Object(l.b)(),C=Object(i.useCallback)((function(e,t){var n=null===_||void 0===_?void 0:_.find((function(e){return e.id===t}));return n&&"multi-select"===n.type&&O[t]?e.split(",").map((function(e){return O[t][e].text})).join(", "):n&&["select","checkbox"].includes(n.type)&&O[t]&&O[t][e]?O[t][e].text:e}),[_,O]);return Object(i.useEffect)((function(){g(Object(s.c)(e)),g(Object(u.a)(e))}),[e,g]),Object(i.useEffect)((function(){_&&_.filter((function(e){return["select","multi-select","checkbox"].includes(e.type)})).forEach((function(e){return m(e.id,e.validValues)}))}),[_,m]),Object(i.useEffect)((function(){h&&_&&Object.keys(O).length&&j((function(){return h.map((function(e){return Object(c.mapValues)(e,C)}))}))}),[h,_,O,C]),{data:d,isErrorData:x,isLoadingData:v,metadata:_,isErrorMetadata:w,isLoadingMetadata:k}}},341:function(e,t,n){"use strict";var a=n(323),i=n(391),c=n(7);t.a=function(e){var t=e.title,n=e.dataSource,l=void 0===n?[]:n,r=e.noDataText,o=void 0===r?"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445":r,s=e.avatar,u=void 0===s?null:s,b=e.width,d=void 0===b?600:b;l&&l.length?a.a.info({title:t,content:Object(c.jsx)(i.b,{dataSource:l,renderItem:function(e){return Object(c.jsx)(i.b.Item,{children:Object(c.jsx)(i.b.Item.Meta,{avatar:u,title:e.title,description:e.description.split("\n").map((function(e,t){return Object(c.jsx)("div",{children:e},t)}))})})}}),width:"".concat(d,"px")}):a.a.info({title:t,content:o,width:"".concat(d,"px")})}},346:function(e,t,n){e.exports={table:"Table_table__3RMoX","hidden-pagination":"Table_hidden-pagination__3y5Zo","table-title":"Table_table-title__2Rdcb","table-title-row-10":"Table_table-title-row-10__2UTBH","table-title-row-20":"Table_table-title-row-20__3eD46","table-title-row-30":"Table_table-title-row-30__2Zw_q","table-title-row-40":"Table_table-title-row-40__3YZXE","table-title-row-50":"Table_table-title-row-50__EDFiG","table-title-row-60":"Table_table-title-row-60__1apef","table-title-row-70":"Table_table-title-row-70__2xsdo","table-title-row-80":"Table_table-title-row-80__3EVn2","table-title-row-90":"Table_table-title-row-90__IyfPo","table-title-row-100":"Table_table-title-row-100__29P3U","table-title-row-110":"Table_table-title-row-110__2Qni0","table-title-row-120":"Table_table-title-row-120__3zTSb","table-title-row-130":"Table_table-title-row-130__lOny3","table-title-row-140":"Table_table-title-row-140__1C6Fe","table-title-row-150":"Table_table-title-row-150__1kRW3","table-title-row-160":"Table_table-title-row-160__XAbUV","table-title-row-170":"Table_table-title-row-170__1O8_m","table-title-row-180":"Table_table-title-row-180__38rnB","table-title-row-190":"Table_table-title-row-190__11sYK","table-title-row-200":"Table_table-title-row-200__1rFw_"}},354:function(e,t,n){e.exports={"editable-cell":"TableEditableCell_editable-cell__LXwkw","editable-cell-value-wrap":"TableEditableCell_editable-cell-value-wrap__1BVb7","editable-row":"TableEditableCell_editable-row__2ctbF"}},355:function(e,t,n){e.exports={"action-menu":"ActionMenu_action-menu__1Quqs"}},356:function(e,t,n){e.exports={"dropdown-menu":"DropdownMenu_dropdown-menu__2hkVv"}},357:function(e,t,n){},359:function(e,t,n){e.exports={"filter-button":"FilterPanel_filter-button__3r320","reset-filter-button":"FilterPanel_reset-filter-button__3mx_s"}},360:function(e,t,n){e.exports={"select-columns-button":"ColumnsPanel_select-columns-button__3wepJ","reset-select-columns-button":"ColumnsPanel_reset-select-columns-button__2E4XD"}},361:function(e,t,n){},368:function(e,t,n){e.exports={center:"DataTable_center__-2FaP"}},387:function(e,t,n){"use strict";n.r(t);var a=n(4),i=n(0),c=n(388),l=n(3),r=n(339),o=function(e){return e.filter((function(e){return"specificParameters"!==e.id})).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{dataIndex:e.id,key:e.id,sorter:{compare:Object(r.a)(e.id,void 0,e.type),multiple:1}})})).sort((function(e,t){return e.tableIndex-t.tableIndex}))},s=n(340),u=n(150),b=n(97),d=n(200),j=n(352),f=n(17),O=n(386),m=n(362),p=n.n(m),h=n(10),x=n(146),v=n(7),y=["id"],_=Object(i.createContext)(null),w=function(e){e.id;var t=Object(h.a)(e,y),n=x.a.useForm(),i=Object(a.a)(n,1)[0];return Object(v.jsx)(x.a,{form:i,component:!1,children:Object(v.jsx)(_.Provider,{value:i,children:Object(v.jsx)("tr",Object(l.a)({},t))})})},k=n(52),g=n(2),C=n(32),T=n.n(C),I=n(56),D=n(92),E=n(70),S=n(148),M=n(147),F=n(196),P=n(354),N=n.n(P),R=["title","inputRef","editing","editable","children","dataIndex","record","handleSave","handleToggleEdit"],B=function(e){var t=e.title,n=e.inputRef,a=e.editing,i=e.editable,c=e.children,r=e.dataIndex,o=(e.record,e.handleSave),s=e.handleToggleEdit,u=Object(h.a)(e,R),b=c;return i&&(b=a?Object(v.jsx)(x.a.Item,{style:{margin:0},name:r,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(v.jsx)(F.a,{ref:n,onPressEnter:o,onBlur:o})}):Object(v.jsx)("div",{className:N.a["editable-cell-value-wrap"],style:{paddingRight:24},onClick:s,children:c})),Object(v.jsx)("td",Object(l.a)(Object(l.a)({},u),{},{children:b}))},A=["title","editable","children","dataIndex","record"],H=function(e){var t=e.title,n=e.editable,c=e.children,r=e.dataIndex,o=e.record,s=Object(h.a)(e,A),u=Object(E.b)().dictionary,d=Object(M.a)().data,j=Object(b.a)(),f=Object(i.useState)(!1),O=Object(a.a)(f,2),m=O[0],p=O[1],x=Object(i.useRef)(null),y=Object(i.useContext)(_),w=Object(I.b)();Object(i.useEffect)((function(){m&&x.current.focus()}),[m]);var C=function(){p(!m),y.setFieldsValue(Object(g.a)({},r,o[r]))},F=function(){var e=Object(k.a)(T.a.mark((function e(){var t,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.validateFields();case 3:t=e.sent,C(),d&&(n=Object(l.a)(Object(l.a)({},o),t),w(Object(S.d)(j,Object(D.a)(u,n,d,"table")))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(B,Object(l.a)({title:t,editing:m,editable:n,children:c,dataIndex:r,record:o,handleSave:F,handleToggleEdit:C,inputRef:x},s))},L=function(e){return{rowExpandable:function(t){return!!t[e]},expandedRowRender:function(t){return Object(v.jsx)("p",{children:t[e]})}}},V=n(94),Y=n(392),z=function(e){return Object(v.jsx)(V.a,{placement:"topLeft",title:"\u0424\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c",children:Object(v.jsx)(Y.a,{style:{fontSize:"17px",color:e?"#1890ff":void 0}})})},X=n(353),q=n(398),K=n(323),G=n(393),J=n(394),Q=n(395),U=n(396),Z=n(397),W=n(89),$=K.a.confirm,ee=function(e){var t=e.onOk,n=e.onCancel,a=e.onFinally,i=e.description,c=e.okText;$({title:"\u0412\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 ?",icon:Object(v.jsx)(W.a,{}),content:i,okText:c||"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",okType:"danger",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",onOk:function(){t(),a&&"function"===typeof a&&a()},onCancel:function(){n(),a&&"function"===typeof a&&a()}})},te=n(355),ne=n.n(te),ae=function(){K.a.info({title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",content:"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u0431\u044b\u043b\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"})},ie=n(324),ce=n(356),le=n.n(ce),re=(n(357),function(e){var t=e.menuItems;return Object(v.jsx)(ie.a,{className:le.a["dropdown-menu"],defaultSelectedKeys:[],selectedKeys:[],activeKey:"something",children:t.map((function(e,t){return"divider"===e.type?Object(v.jsx)(ie.a.Divider,{},"divider-".concat(t)):"submenu"===e.type?Object(v.jsx)(ie.a.SubMenu,{title:e.title,children:e.items&&e.items.map((function(e){return Object(v.jsx)(ie.a.Item,{onClick:e.onClick,icon:e.icon,children:e.title},e.key)}))},e.key):Object(v.jsx)(ie.a.Item,{onClick:e.onClick,icon:e.icon,children:e.title},e.key)}))})}),oe=n(341),se=n(176),ue=function(e){var t=e.isOpen,n=e.onEditHandler,c=e.onAddHandler,l=e.onClose,r=e.formData,o=Object(E.b)().dictionary,s=Object(M.a)(),b=s.data,d=s.isError,j=s.isLoading,f=Object(i.useState)([]),O=Object(a.a)(f,2),m=O[0],p=O[1],h=Object(i.useState)(r),x=Object(a.a)(h,2),y=x[0],_=x[1];return Object(i.useEffect)((function(){m&&r&&b&&_(Object(D.a)(o,r,b,"modalEdit"))}),[r,m,o,b]),Object(i.useEffect)((function(){b&&p(b.filter((function(e){return"specificParameters"!==e.id})).filter((function(e){return!e.isPseudo})).sort((function(e,t){return e.tableIndex-t.tableIndex})).map((function(e){return{label:e.title,name:e.id,type:e.type,rules:[],disabled:!e.isEditable}})))}),[b]),!b||d||j?null:Object(v.jsx)(se.a,{title:Object(u.a)(b).addMenuTitle||"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",okButtonTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,handleOk:n,handleClose:l,formItems:m,initialValues:y,additionalButtons:[{onClick:c,title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a \u043d\u043e\u0432\u044b\u0439"}]})},be=n(181),de=n(11),je=n(12),fe=n(6),Oe=n(48),me=n.n(Oe),pe=n(358),he=n(25),xe=n(105),ve=(pe.tuple.apply(void 0,Object(fe.a)(he.d)),function(){function e(){Object(de.a)(this,e)}return Object(je.a)(e,null,[{key:"getConnectedData",value:function(){var e=Object(k.a)(T.a.mark((function e(t,n,a){var i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.a.get("".concat(he.f,"/").concat(t,"/get-").concat(n,"/").concat(a));case 3:return i=e.sent,e.abrupt("return",i.data);case 7:e.prev=7,e.t0=e.catch(0),Object(xe.a)({type:"error",message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445",description:e.t0.message?e.t0.message:e.t0.statusText});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}()),ye=function(e){var t=e.dataItem,n=e.title,c=e.tableParameters,l=e.tablename,r=Object(E.b)().dictionary,o=Object(i.useState)(),s=Object(a.a)(o,2),u=s[0],b=s[1],d=Object(M.a)().data,j=function(){return b(void 0)},f=function(e){return m(Object(S.d)(l,e))},O=Object(i.useCallback)(function(){var e=Object(k.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.getConnectedData(l,"discussion",+t.id);case 2:(n=e.sent)&&Object(oe.a)({title:"\u041e\u0431\u0441\u0443\u0436\u0434\u0435\u043d\u0438\u044f",avatar:Object(v.jsx)(q.a,{}),dataSource:n,noDataText:"\u0420\u0430\u043d\u0435\u0435 \u043e\u0431\u0441\u0443\u0436\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u043b\u043e\u0441\u044c"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),m=Object(I.b)(),p=function(e){var t=e.dataItem,n=e.metadata,i=e.tableParameters,c=e.handleOpen,l=e.handleEdit,r=e.handleDelete,o=e.handleGetConnectedData,s=e.dictionary,u=[];i.hasDiscussion&&(u.push({type:"item",key:"action-menu-".concat(t.key,"-add-discussion"),onClick:function(){c("addDiscussion")},icon:Object(v.jsx)(G.a,{className:ne.a["action-menu"]}),title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0431\u0441\u0443\u0436\u0434\u0435\u043d\u0438\u0435"}),u.push({type:"item",key:"action-menu-".concat(t.key,"-show-discussions"),onClick:function(){return o(t)},icon:Object(v.jsx)(J.a,{className:ne.a["action-menu"]}),title:"\u041f\u0440\u043e\u0432\u0435\u0434\u0451\u043d\u043d\u044b\u0435 \u043e\u0431\u0441\u0443\u0436\u0434\u0435\u043d\u0438\u044f"}),u.push({type:"divider",key:"divider-discussion"}));i.hasEditMenu&&u.push({type:"item",key:"action-menu-".concat(t.key,"-edit"),onClick:function(){c("editItem")},icon:Object(v.jsx)(Q.a,{className:ne.a["action-menu"]}),title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"});return i.hasSetStatusMenu&&n&&u.push({type:"submenu",key:"action-menu-".concat(t.key,"-status"),title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441",items:Object.entries(null===s||void 0===s?void 0:s.status).map((function(e){var i=Object(a.a)(e,2),c=i[0],r=i[1],o=Object(D.a)(s,t,n,"table");return{key:"action-menu-status-".concat(c),title:r.text,onClick:function(){o.status=c,l(o)}}}))}),i.hasDeleteButton&&u.push({type:"item",key:"action-menu-".concat(t.key,"-delete"),onClick:function(){ee({onOk:function(){return r(t)},onCancel:function(){return console.log("")},description:"\u0412\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u0442\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 ?"})},icon:Object(v.jsx)(U.a,{className:ne.a["action-menu"]}),title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),i.hasNotificationButton&&(u.push({type:"divider",key:"divider-notification"}),u.push({type:"item",key:"action-menu-".concat(t.key,"-notify"),onClick:ae,icon:Object(v.jsx)(Z.a,{className:ne.a["action-menu"]}),title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435"})),u}({dataItem:t,dictionary:r,metadata:d,tableParameters:c,handleOpen:function(e){b(e)},handleDelete:function(e){return m(Object(S.b)(l,e))},handleEdit:f,handleGetConnectedData:O});return p.length?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ue,{isOpen:"editItem"===u,onEditHandler:f,onAddHandler:function(e){delete e.id,m(Object(S.a)(l,e))},onClose:j,formData:t}),Object(v.jsx)(be.a,{isOpen:"addDiscussion"===u,onAddHandler:function(e){m(Object(S.a)("discussion",e))},onClose:j,modalTablename:"discussion",modalInitialValues:{theme:t.text,mainQuestions:t.description}}),Object(v.jsx)(V.a,{placement:"topRight",title:n,children:Object(v.jsx)(X.a.Button,{overlay:Object(v.jsx)(re,{menuItems:p}),trigger:["click"]})})]}):null},_e=n(107),we=n(43),ke=n(389),ge=n(202),Ce=n(203),Te=n(91),Ie=n(322),De=n(384),Ee=n(385),Se=n(382),Me=n(359),Fe=n.n(Me),Pe=n(399),Ne=n(360),Re=n.n(Ne),Be=n(346),Ae=n.n(Be),He=(n(361),n(38)),Le=n.n(He);n(347);Le.a.locale("ru");var Ve=function(e,t){return e.map((function(e){var n=Object(l.a)({},e);return t.forEach((function(e){if(e.isPseudo)try{"prettyDate"===e.pseudoFieldFormula&&(n[e.id]=Le()(new Date(n.date)).format("dddd, DD MMMM"))}catch(t){console.log(t)}})),n}))},Ye=function(e){var t=e.data,n=e.columns,c=e.tableParameters,r=e.tablename,o=e.dictionary,s=e.invertDictionary,u=Object(_e.b)(),b=u.setDataPrintRef,m=u.setDataPrintMode,h=u.dataPrintMode,y=Object(i.useRef)(null),_=Object(i.useState)(1),k=Object(a.a)(_,2),g=k[0],C=k[1],T=Object(i.useState)(10),I=Object(a.a)(T,2),D=I[0],S=I[1],M=Object(i.useState)(!0),P=Object(a.a)(M,2),N=P[0],R=P[1],B=c.hasActionMenu;Object(i.useEffect)((function(){y&&b(y)}),[b]);var A=Object(i.useMemo)((function(){return t.map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{key:"table-row-".concat(e.id,"-").concat(t),action:B?Object(v.jsx)(ye,{title:"\u041c\u0435\u043d\u044e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439",dataItem:e,tableParameters:c,tablename:r},"action-menu-".concat(e.id,"-").concat(t)):null})}))}),[t,c,B,r]),X=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(i.useState)([]),c=Object(a.a)(n,2),r=c[0],o=c[1],s=Object(i.useState)(t),u=Object(a.a)(s,2),b=u[0],d=u[1],j=x.a.useForm(),f=Object(a.a)(j,1)[0];Object(i.useEffect)((function(){e&&o(e)}),[e]);var O=Object(i.useCallback)((function(){return d(!0)}),[]),m=Object(i.useCallback)((function(){return d(!1)}),[]),p=Object(i.useCallback)((function(){o(e),f.setFields(e.map((function(e){return{name:e.dataIndex,value:e.showInTable}})))}),[f,e]),h=Object(i.useCallback)((function(e){o((function(t){return t.map((function(t){var n;return Object(l.a)(Object(l.a)({},t),{},{showInTable:null!==(n=e[t.dataIndex])&&void 0!==n&&n})}))})),m()}),[m]),y=Object(i.useMemo)((function(){return Object(v.jsx)(V.a,{placement:"topRight",title:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u043e\u043b\u043e\u043d\u043a\u0438",children:Object(v.jsx)(we.a,{onClick:O,className:Re.a["select-columns-button"],icon:Object(v.jsx)(Pe.a,{style:{fontSize:"20px"}})})})}),[O]),_=Object(i.useMemo)((function(){return Object(v.jsx)(ke.a,{title:"\u041a\u043e\u043b\u043e\u043d\u043a\u0438",placement:"right",onClose:m,visible:b,width:250,children:Object(v.jsxs)(x.a,{name:"basic",preserve:!1,labelCol:{span:20},wrapperCol:{span:4},onFinish:h,onFinishFailed:console.log,form:f,children:[Object(v.jsx)(x.a.Item,{wrapperCol:{span:24},children:Object(v.jsx)(we.a,{onClick:p,style:{width:"100%"},children:"\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"})}),r.map((function(e){var t={name:e.dataIndex,label:e.title,type:e.type,disabled:!1};return Object(v.jsx)(x.a.Item,{label:t.label,name:t.name,valuePropName:"checked",initialValue:e.showInTable,style:{marginBottom:"12px"},children:Object(v.jsx)(ge.a,{value:!0})},t.name)})),Object(v.jsx)(x.a.Item,{wrapperCol:{span:24},style:{marginTop:"30px"},children:Object(v.jsx)(we.a,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"})})]})})}),[f,r,b,m,p,h]),w=Object(i.useMemo)((function(){return(null!==r&&void 0!==r?r:[]).filter((function(e){return e.showInTable}))}),[r]);return{ColumnsPanelButtons:y,ColumnsPanel:_,columnsData:w}}(n),q=X.ColumnsPanelButtons,K=X.ColumnsPanel,G=X.columnsData,J=G.map((function(e){var t=Object(l.a)(Object(l.a)({},e),{},{filterIcon:z});e.isInlineEditable?t.onCell=function(t){return{record:t,editable:e.isInlineEditable,dataIndex:e.dataIndex,title:e.title}}:t.render=function(t,n){var a,i=e.dataIndex,c=n[i],l=s[i]&&s[i][c]?s[i][c]:c;return e.isTagged?Object(v.jsx)(d.a,{color:null===(a=o[i][l])||void 0===a?void 0:a.tag,children:t}):t};var n=function(e){if(Array.isArray(c.defaultSortField)){var t=c.defaultSortField.indexOf(e);return t<0?null:c.defaultSortDirection[t]}return e===c.defaultSortField?c.defaultSortDirection:null}(e.dataIndex);return n&&N&&(t.sortOrder=n),t}));J=function(e,t){var n=Object(fe.a)(e);return t&&n.push({dataIndex:"action",key:"action",isInlineEditable:!1,showInTable:!0,type:"action",className:"table-action-column"}),n}(J,B),J=function(e){return e.map((function(e){var t,n;return"action"!==e.dataIndex?Object(l.a)(Object(l.a)({},e),{},{className:Ae.a["table-title-row-".concat(10*Math.ceil((7*(null!==(t=null===(n=e.title)||void 0===n?void 0:n.length)&&void 0!==t?t:1)+48)/10))]}):Object(l.a)({},e)}))}(J);var Q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=Object(E.b)().dictionary,l=Object(i.useState)(!1),r=Object(a.a)(l,2),o=r[0],s=r[1],u=Object(i.useState)(),b=Object(a.a)(u,2),d=b[0],j=b[1],f=Object(i.useState)(n),O=Object(a.a)(f,2),m=O[0],p=O[1],h=x.a.useForm(),y=Object(a.a)(h,1)[0],_=Object(i.useCallback)((function(e){p(!0)}),[]),w=Object(i.useCallback)((function(){p(!1)}),[]),k=Object(i.useMemo)((function(){return null!==d&&void 0!==d?d:t}),[d,t]),g=Object(i.useCallback)((function(){j(t),s(!1),y.resetFields()}),[t,y]),C=Object(i.useCallback)((function(e){s(!1),j(t.filter((function(t){return Object.keys(t).reduce((function(n,a){var i=c&&c[a]?c[a][e[a]].text:e[a];return"number"===typeof t[a]&&(i=+i),"boolean"===typeof t[a]&&(i=!!i),i&&s(!0),n&&("boolean"===typeof t[a]&&t[a]===i||!i&&"boolean"!==typeof t[a]||i&&t[a]&&t[a]===i)}),!0)}))),w()}),[c,t,w]),T=Object(i.useMemo)((function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(V.a,{placement:"topRight",title:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b",children:Object(v.jsx)(we.a,{onClick:_,className:Fe.a["filter-button"],children:o?Object(v.jsx)(Se.a,{style:{fontSize:"20px"}}):Object(v.jsx)(Y.a,{style:{fontSize:"20px"}})})}),Object(v.jsx)(we.a,{onClick:g,className:Fe.a["reset-filter-button"],style:{display:o?"inline":"none"},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"})]})}),[_,g,o]),I=Object(i.useMemo)((function(){return Object(v.jsx)(ke.a,{title:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b",placement:"right",onClose:w,visible:m,width:430,children:Object(v.jsxs)(x.a,{name:"basic",preserve:!1,labelCol:{span:8},wrapperCol:{span:16},onFinish:C,form:y,children:[e.filter((function(e){return e.isFilter})).map((function(e){var t={name:e.dataIndex,label:e.title,type:e.type,disabled:!1};return Object(v.jsx)(x.a.Item,{label:t.label,name:t.name,valuePropName:"checkbox"===t.type?"checked":"value",children:["string","number"].includes(t.type)?Object(v.jsx)(F.a,{}):"fulltext"===t.type?Object(v.jsx)(F.a.TextArea,{}):"checkbox"===t.type?Object(v.jsx)(ge.a,{value:!0}):["select","multi-select"].includes(t.type)&&c[t.name]?Object(v.jsx)(Ce.a,{allowClear:!0,filterOption:function(e,t){return RegExp(e,"i").test("".concat(null===t||void 0===t?void 0:t.label))},mode:"multi-select"===t.type?"multiple":void 0,showSearch:!0,options:Object.entries(c[t.name]).map((function(e){var t=Object(a.a)(e,2);return{value:t[0],label:t[1].text}}))}):"date"===t.type?Object(v.jsx)(Te.a,{format:"YYYY-MM-DD"}):"datetime"===t.type?Object(v.jsx)(Te.a,{format:"YYYY-MM-DD HH:mm:ss",showTime:!0}):"time"===t.type?Object(v.jsx)(Ie.a,{format:"HH:mm:ss"}):null},t.name)})),Object(v.jsx)(x.a.Item,{wrapperCol:{span:24},style:{marginTop:"50px"},children:Object(v.jsxs)(De.a,{children:[Object(v.jsx)(Ee.a,{span:12,children:Object(v.jsx)(we.a,{onClick:g,children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"})}),Object(v.jsx)(Ee.a,{span:12,style:{textAlign:"right"},children:Object(v.jsx)(we.a,{type:"primary",htmlType:"submit",children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"})})]})})]})})}),[y,c,e,m,w,g,C]);return{FilterButtons:T,FilterPanel:I,filterData:k}}(G,A),U=Q.FilterButtons,Z=Q.FilterPanel,W=Q.filterData,$=Object(i.useCallback)((function(e,t){C(e),S(t)}),[]),ee=Object(i.useCallback)((function(){return Object(v.jsxs)("div",{className:Ae.a["table-title"],children:[Object(v.jsxs)("div",{children:[U,q]}),Object(v.jsx)(j.a,{showSizeChanger:!0,current:g,pageSize:D,onChange:$,total:(W||[]).length})]})}),[U,q,W,g,D,$]);return Object(i.useEffect)((function(){"all"===h?(S(0),m("print")):"current"===h||S(10)}),[W,D,h,m]),Object(v.jsxs)(f.a,{locale:p.a,children:[Z,K,Object(v.jsx)(O.a,{ref:y,dataSource:Ve(W,J),columns:J,title:ee,tableLayout:"auto",components:{body:{row:w,cell:H}},rowClassName:function(){return"editable-row"},bordered:!1,loading:!1,size:"large",expandable:L("description"),sticky:!0,pagination:{position:["topRight"],pageSize:D,current:g,total:W.length,className:Ae.a["hidden-pagination"]},className:Ae.a.table,onChange:function(){return R(!1)}})]})},ze=n(149),Xe=n(368),qe=n.n(Xe),Ke=c.a.Title;t.default=function(){var e=Object(i.useState)(null),t=Object(a.a)(e,2),n=t[0],c=t[1],l=Object(b.a)(),r=Object(E.b)(),d=r.dictionary,j=r.invertDictionary,f=Object(s.a)(l),O=f.data,m=f.isErrorData,p=f.isLoadingData,h=f.metadata,x=f.isErrorMetadata,y=f.isLoadingMetadata;return Object(i.useEffect)((function(){h&&c(Object(u.a)(h))}),[h]),p||y?Object(v.jsx)("div",{className:qe.a.center,children:Object(v.jsx)(ze.a,{})}):!m&&!x||O?O&&h&&n&&Object(v.jsx)(Ye,{data:O,columns:o(h),tableParameters:n,tablename:l,dictionary:d,invertDictionary:j}):Object(v.jsx)("div",{className:qe.a.center,children:Object(v.jsx)(Ke,{level:3,children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445"})})}}}]);
//# sourceMappingURL=5.6e4ff14e.chunk.js.map