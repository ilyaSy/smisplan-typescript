{"version":3,"sources":["utils/sortData.ts","utils/hooks/useGetDataMeta.tsx","components/UI/ModalWithList.tsx","components/UI/TableEditableCell/TableEditableCell.module.scss","components/ActionMenu/ActionMenu.module.scss","components/UI/DropdownMenu/DropdownMenu.module.scss","components/UI/FilterPanel/FilterPanel.module.scss","components/UI/ColumnsPanel/ColumnsPanel.module.scss","components/UI/Table/Table.module.scss","components/DataTable/DataTable.module.scss","utils/mapMetadataToColumns.ts","components/UI/TableEditableRow/index.tsx","components/UI/TableEditableCell/index.tsx","components/TableEditableCell/index.tsx","components/UI/TableExpandableRow.tsx","components/UI/TableFilterIcon.tsx","components/Modals/ConfirmModal/index.tsx","components/ActionMenu/createActions.tsx","components/UI/DropdownMenu/index.tsx","components/Modals/DataEditModal/index.tsx","utils/Api.ts","components/ActionMenu/index.tsx","components/UI/Table/index.tsx","components/UI/ColumnsPanel/index.tsx","components/UI/FilterPanel/index.tsx","components/DataTable/index.tsx"],"names":["sortData","key","direction","type","a","b","valueA","valueB","useGetDataMeta","tablename","useState","data","setData","useDictionaryContext","dictionary","setDictionary","useDataSelector","sourceData","isErrorData","isError","isLoadingData","isLoading","useMetadataSelector","metadata","isErrorMetadata","isLoadingMetadata","dispatch","useDispatch","mapDictionaryCb","useCallback","value","metadataProperty","find","property","id","split","map","v","text","join","includes","useEffect","dataGetAction","metadataGetAction","filter","forEach","validValues","Object","keys","length","d","mapValues","ModalWithList","title","dataSource","noDataText","avatar","width","Modal","info","content","renderItem","item","Item","Meta","description","index","module","exports","mapMetadataToColumns","c","metadataColumn","dataIndex","sorter","compare","undefined","multiple","sort","tableIndex","EditableContext","createContext","DataTableEditableRow","props","Form","useForm","form","component","Provider","TableEditableCell","inputRef","editing","editable","children","handleSave","record","handleToggleEdit","restProps","childNode","style","margin","name","rules","required","message","ref","onPressEnter","onBlur","className","classes","paddingRight","onClick","DataTableEditableCell","useGetTablename","setEditing","useRef","useContext","current","focus","setFieldsValue","save","validateFields","values","dataUpdateAction","convertDataItem","console","log","TableExpandableRow","rowExpandable","expandedRowRender","TableFilterIcon","filtered","placement","FilterOutlined","fontSize","color","confirm","showConfirmModal","onOk","onCancel","onFinally","okText","icon","ExclamationCircleOutlined","okType","cancelText","handleDummyClick","DropdownMenu","menuItems","defaultSelectedKeys","selectedKeys","activeKey","menuItem","Divider","SubMenu","items","subMenuItem","DataEditModal","isOpen","onEditHandler","onAddHandler","onClose","formData","formItems","setFormItems","initialValues","setInitialValues","m","label","disabled","isEditable","ModalWithForm","getTableParameters","addMenuTitle","okButtonTitle","handleOk","handleClose","additionalButtons","Api","tuple","mainModes","connectedTablename","axios","get","urlApi","result","Notification","statusText","ActionMenu","dataItem","tableParameters","openModal","setOpenModal","handleEdit","handleGetConnectedData","getConnectedData","connectedData","CarryOutOutlined","actions","handleOpen","handleDelete","hasDiscussion","push","ScheduleOutlined","ScheduleFilled","hasEditMenu","EditFilled","hasSetStatusMenu","entries","status","statusKey","statusInfo","hasDeleteButton","DeleteFilled","hasNotificationButton","BellOutlined","createActions","t","dataDeleteAction","dataAddAction","DataAddModal","modalTablename","modalInitialValues","theme","mainQuestions","Button","overlay","trigger","DataTable","columns","invertDictionary","usePrintPDFContext","setDataPrintRef","setDataPrintMode","dataPrintMode","dataRef","page","setPage","pageSize","setPageSize","hasActionMenu","useMemo","action","getDefaultSorter","field","Array","isArray","defaultSortField","indexOf","defaultSortDirection","initialVisible","columnsData","setColumnsData","visible","setVisible","openPanel","closePanel","resetColumns","setFields","showInTable","handleSubmit","prev","columnData","ColumnsPanelButtons","OrderedListOutlined","ColumnsPanel","preserve","labelCol","span","wrapperCol","onFinish","onFinishFailed","formItem","valuePropName","initialValue","marginBottom","marginTop","htmlType","useColumnsDrawer","tableColumns","column","isInlineEditable","defaultSortOrder","sortOrder","filterIcon","onCell","render","columnId","tableValue","originalValue","isTagged","tag","tableColumn","Math","ceil","visibleResetButton","setVisibleResetButton","filterData","setFilterData","e","handleReset","resetFields","reduce","acc","FilterButtons","FilterFilled","display","FilterPanel","isFilter","TextArea","allowClear","filterOption","option","RegExp","test","mode","showSearch","options","format","showTime","textAlign","useFilterDrawer","handleChangePage","nextPage","TableTitle","showSizeChanger","onChange","total","locale","ruRU","tableLayout","components","body","row","TableEditableRow","cell","rowClassName","bordered","loading","size","expandable","sticky","pagination","position","table","Title","Typography","setTableParameters","center","LoadingComponent","level"],"mappings":"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","file":"static/js/5.7a52bfd8.chunk.js","sourcesContent":["import { TData } from \"../types/TData\";\r\nimport { TDataTypes } from \"../types/TDataTypes\";\r\n\r\nconst sortData =\r\n  (key: string, direction: \"ascend\" | \"descend\" = \"ascend\", type?: TDataTypes) =>\r\n  (a: TData, b: TData) =>\r\n  {\r\n    const valueA = type && type === 'number' ? +a[key] : a[key];\r\n    const valueB = type && type === 'number' ? +b[key] : b[key];\r\n\r\n    if (valueA < valueB) return direction === \"ascend\" ? -1 : 1;\r\n    if (valueA > valueB) return direction === \"ascend\" ? 1 : -1;\r\n    return 0;\r\n  }\r\n\r\nexport default sortData;\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { mapValues } from \"lodash\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useDataSelector } from \"../../storages/selectors/data\";\r\nimport { useMetadataSelector } from \"../../storages/selectors/metadata\";\r\nimport { dataGetAction } from \"../../storages/actions/data\";\r\nimport { metadataGetAction } from \"../../storages/actions/metadata\";\r\nimport { useDictionaryContext } from \"../../context/DictionaryContext\";\r\nimport { TData } from \"../../types/TData\";\r\n\r\nexport const useGetDataMeta = (tablename: string) => {\r\n  const [ data, setData ] = useState<TData[]>([]);\r\n  const { dictionary, setDictionary } = useDictionaryContext();\r\n\r\n  const { data: sourceData, isError: isErrorData, isLoading: isLoadingData } = useDataSelector();\r\n  const { data: metadata, isError: isErrorMetadata, isLoading: isLoadingMetadata } = useMetadataSelector();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const mapDictionaryCb = useCallback((value: string, key: string) => {\r\n    const metadataProperty = metadata?.find((property) => property.id === key);\r\n    if (metadataProperty && metadataProperty.type === 'multi-select' && dictionary[key]){\r\n      return value.split(',').map((v) => dictionary[key][v].text).join(', ')\r\n    } else if (metadataProperty && ['select', 'checkbox'].includes(metadataProperty.type)  && dictionary[key] && dictionary[key][value]) {\r\n      return dictionary[key][value].text\r\n    }\r\n    return value;\r\n  }, [metadata, dictionary])\r\n\r\n  useEffect(() => {\r\n    dispatch(dataGetAction(tablename));\r\n    dispatch(metadataGetAction(tablename));\r\n  }, [tablename, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (metadata) {\r\n      metadata\r\n        .filter((property) => ['select', 'multi-select', 'checkbox'].includes(property.type))\r\n        .forEach((property) => setDictionary(property.id, property.validValues))\r\n    }\r\n  }, [metadata, setDictionary]);\r\n\r\n  useEffect(() => {\r\n    if (sourceData && metadata && Object.keys(dictionary).length) {\r\n      setData(() => sourceData.map((d) => mapValues(d, mapDictionaryCb)));\r\n    }\r\n  }, [sourceData, metadata, dictionary, mapDictionaryCb]);\r\n\r\n  return {\r\n    data, isErrorData, isLoadingData,\r\n    metadata, isErrorMetadata, isLoadingMetadata\r\n  }\r\n}\r\n","import { List, Modal } from \"antd\";\r\n\r\ninterface IModalWithList {\r\n  title: string;\r\n  dataSource?: {title: string, description: string}[],\r\n  noDataText?: string,\r\n  avatar?: React.ReactNode,\r\n  width?: number,\r\n};\r\n\r\nconst ModalWithList = ({\r\n  title,\r\n  dataSource = [],\r\n  noDataText = 'Нет данных',\r\n  avatar = null,\r\n  width = 600,\r\n}: IModalWithList) => {\r\n  if (dataSource && dataSource.length) {\r\n    Modal.info({\r\n      title,\r\n      content: (\r\n        <List\r\n          dataSource={dataSource}\r\n          renderItem={(item) => (\r\n            <List.Item>\r\n              <List.Item.Meta\r\n                avatar={avatar}\r\n                title={item.title}\r\n                description={item.description.split('\\n').map((text, index) => <div key={index}>{text}</div>)}\r\n              />\r\n            </List.Item>\r\n          )}\r\n        />\r\n      ),\r\n      width: `${width}px`\r\n    });\r\n  } else {\r\n    Modal.info({\r\n      title,\r\n      content: noDataText,\r\n      width: `${width}px`\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default ModalWithList;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editable-cell\":\"TableEditableCell_editable-cell__LXwkw\",\"editable-cell-value-wrap\":\"TableEditableCell_editable-cell-value-wrap__1BVb7\",\"editable-row\":\"TableEditableCell_editable-row__2ctbF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"action-menu\":\"ActionMenu_action-menu__1Quqs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropdown-menu\":\"DropdownMenu_dropdown-menu__2hkVv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filter-button\":\"FilterPanel_filter-button__3r320\",\"reset-filter-button\":\"FilterPanel_reset-filter-button__3mx_s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"select-columns-button\":\"ColumnsPanel_select-columns-button__3wepJ\",\"reset-select-columns-button\":\"ColumnsPanel_reset-select-columns-button__2E4XD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"Table_table__3RMoX\",\"hidden-pagination\":\"Table_hidden-pagination__3y5Zo\",\"table-title\":\"Table_table-title__2Rdcb\",\"table-title-row-10\":\"Table_table-title-row-10__2UTBH\",\"table-title-row-20\":\"Table_table-title-row-20__3eD46\",\"table-title-row-30\":\"Table_table-title-row-30__2Zw_q\",\"table-title-row-40\":\"Table_table-title-row-40__3YZXE\",\"table-title-row-50\":\"Table_table-title-row-50__EDFiG\",\"table-title-row-60\":\"Table_table-title-row-60__1apef\",\"table-title-row-70\":\"Table_table-title-row-70__2xsdo\",\"table-title-row-80\":\"Table_table-title-row-80__3EVn2\",\"table-title-row-90\":\"Table_table-title-row-90__IyfPo\",\"table-title-row-100\":\"Table_table-title-row-100__29P3U\",\"table-title-row-110\":\"Table_table-title-row-110__2Qni0\",\"table-title-row-120\":\"Table_table-title-row-120__3zTSb\",\"table-title-row-130\":\"Table_table-title-row-130__lOny3\",\"table-title-row-140\":\"Table_table-title-row-140__1C6Fe\",\"table-title-row-150\":\"Table_table-title-row-150__1kRW3\",\"table-title-row-160\":\"Table_table-title-row-160__XAbUV\",\"table-title-row-170\":\"Table_table-title-row-170__1O8_m\",\"table-title-row-180\":\"Table_table-title-row-180__38rnB\",\"table-title-row-190\":\"Table_table-title-row-190__11sYK\",\"table-title-row-200\":\"Table_table-title-row-200__1rFw_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"center\":\"DataTable_center__-2FaP\"};","import sortData from './sortData';\r\nimport { TColumn } from '../types/TColumn';\r\nimport { TData } from '../types/TData';\r\n\r\ntype TMapMetadataToColumns = (\r\n  metadata: TData[],\r\n) => Record<string, TColumn>[]\r\n\r\nexport const mapMetadataToColumns: TMapMetadataToColumns = (metadata) => {\r\n  const columns = metadata\r\n    .filter((c) => c.id !== 'specificParameters')\r\n    .map((metadataColumn) => {\r\n      const column: TData = {\r\n        ...metadataColumn,\r\n        dataIndex: metadataColumn.id,\r\n        key: metadataColumn.id,\r\n        sorter: {\r\n          compare: sortData(metadataColumn.id, undefined, metadataColumn.type),\r\n          multiple: 1,\r\n        },\r\n      }\r\n\r\n      return column;\r\n    })\r\n    .sort((a, b) => a.tableIndex - b.tableIndex)\r\n    // .filter((c: any) => !filterRealColumns || (filterRealColumns && c.showInTable && c.type !== 'fulltext'))\r\n\r\n  return columns;\r\n}\r\n","import { createContext } from 'react';\r\nimport { Form } from 'antd';\r\nimport { FormInstance } from 'antd/lib/form';\r\n\r\nexport const EditableContext = createContext<FormInstance<any> | null>(null);\r\n\r\ninterface IEditableRowProps {\r\n  id: number;\r\n}\r\n\r\nconst DataTableEditableRow: React.FC<IEditableRowProps> = ({ id, ...props }) => {\r\n  const [form] = Form.useForm();\r\n  return (\r\n    <Form form={form} component={false}>\r\n      <EditableContext.Provider value={form}>\r\n        <tr {...props} />\r\n      </EditableContext.Provider>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default DataTableEditableRow;\r\n","import React from 'react';\r\nimport { Form, Input } from 'antd';\r\nimport classes from './TableEditableCell.module.scss';\r\n\r\ninterface Item {\r\n  key: string;\r\n  name: string;\r\n  age: string;\r\n  address: string;\r\n}\r\n\r\ninterface EditableCellProps {\r\n  title: React.ReactNode;\r\n  inputRef: React.RefObject<Input>;\r\n  editing: boolean;\r\n  editable: boolean;\r\n  children: React.ReactNode;\r\n  dataIndex: keyof Item;\r\n  record: Item;\r\n  handleSave: () => void;\r\n  handleToggleEdit: () => void;\r\n}\r\n\r\nconst TableEditableCell: React.FC<EditableCellProps> = ({\r\n  title,\r\n  inputRef,\r\n  editing,\r\n  editable,\r\n  children,\r\n  dataIndex,\r\n  record,\r\n  handleSave,\r\n  handleToggleEdit,\r\n  ...restProps\r\n}) => {\r\n  let childNode = children;\r\n\r\n  if (editable) {\r\n    childNode = editing ? (\r\n      <Form.Item\r\n        style={{ margin: 0 }}\r\n        name={ dataIndex }\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: `${title} is required.`,\r\n          },\r\n        ]}\r\n      >\r\n        <Input\r\n          ref={inputRef}\r\n          onPressEnter={handleSave}\r\n          onBlur={handleSave}\r\n        />\r\n      </Form.Item>\r\n    ) : (\r\n      <div\r\n        className={classes[\"editable-cell-value-wrap\"]}\r\n        style={{ paddingRight: 24 }}\r\n        onClick={handleToggleEdit}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <td {...restProps}>{childNode}</td>;\r\n};\r\n\r\nexport default TableEditableCell;\r\n","import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport { Input } from 'antd';\r\nimport { useDispatch } from 'react-redux';\r\nimport { EditableContext } from '../UI/TableEditableRow';\r\nimport { convertDataItem } from '../../utils/convertDataItem';\r\nimport { useGetTablename } from '../../utils/hooks/useGetTablename';\r\nimport { useDictionaryContext } from '../../context/DictionaryContext';\r\nimport { dataUpdateAction } from '../../storages/actions/data';\r\nimport { useMetadataSelector } from '../../storages/selectors/metadata';\r\nimport TableEditableCell from '../UI/TableEditableCell';\r\n\r\ninterface Item {\r\n  key: string;\r\n  name: string;\r\n  age: string;\r\n  address: string;\r\n}\r\n\r\nexport interface EditableCellProps {\r\n  title: React.ReactNode;\r\n  editable: boolean;\r\n  children: React.ReactNode;\r\n  dataIndex: keyof Item;\r\n  record: Item;\r\n  // handleSave: (record: Item) => void;\r\n  // tablename: string,\r\n}\r\n\r\nconst DataTableEditableCell: React.FC<EditableCellProps> = ({\r\n  title,\r\n  editable,\r\n  children,\r\n  dataIndex,\r\n  record,\r\n  // tablename,\r\n  ...restProps\r\n}) => {\r\n  const { dictionary } = useDictionaryContext();\r\n  const {data: metadata} = useMetadataSelector();\r\n  const tablename = useGetTablename();\r\n\r\n  const [editing, setEditing] = useState(false);\r\n  const inputRef = useRef<Input>(null);\r\n  const form = useContext(EditableContext)!;\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (editing) {\r\n      inputRef.current!.focus();\r\n    }\r\n  }, [editing]);\r\n\r\n  const handleToggleEdit = () => {\r\n    setEditing(!editing);\r\n    form.setFieldsValue({ [dataIndex]: record[dataIndex] });\r\n  };\r\n\r\n  const save = async () => {\r\n    try {\r\n      const values = await form.validateFields();\r\n\r\n      handleToggleEdit();\r\n      if (metadata) {\r\n        const data = { ...record, ...values };\r\n        dispatch(dataUpdateAction(tablename, convertDataItem(dictionary, data, metadata, 'table')));\r\n      }\r\n    } catch (errInfo) {\r\n      console.log('Save failed:', errInfo);\r\n    }\r\n  };\r\n\r\n  return <TableEditableCell\r\n    title={title}\r\n    editing={editing}\r\n    editable={editable}\r\n    children={children}\r\n    dataIndex={dataIndex}\r\n    record={record}\r\n    handleSave={save}\r\n    handleToggleEdit={handleToggleEdit}\r\n    inputRef={inputRef}\r\n    {...restProps}\r\n  />\r\n};\r\n\r\nexport default DataTableEditableCell;\r\n","import { ReactElement } from 'react';\r\nimport { TData } from '../../types/TData';\r\n\r\nconst TableExpandableRow = (key: keyof TData) => {\r\n  return {\r\n    rowExpandable: (record: TData): boolean => !!record[key],\r\n    expandedRowRender: (record: TData): ReactElement => {\r\n      return <p>{record[key]}</p>\r\n    }\r\n  }\r\n};\r\n\r\nexport default TableExpandableRow;","import { Tooltip } from 'antd';\r\nimport { FilterOutlined } from '@ant-design/icons';\r\n\r\nconst TableFilterIcon = (filtered: boolean) => {\r\n  return (\r\n    <Tooltip placement=\"topLeft\" title=\"Фильтровать\">\r\n      <FilterOutlined style={{ fontSize: '17px', color: filtered ? '#1890ff' : undefined }} />\r\n    </Tooltip>\r\n  );\r\n}\r\n\r\nexport default TableFilterIcon;","import { Modal } from 'antd';\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\r\n\r\ntype TConfirmModal = ({\r\n  onOk: () => void,\r\n  onCancel: () => void,\r\n  onFinally?: () => void,\r\n  description?: string,\r\n  okText?: string,\r\n});\r\n\r\nconst { confirm  } = Modal;\r\n\r\nconst showConfirmModal = ({ onOk, onCancel, onFinally, description, okText }: TConfirmModal) => {\r\n  const handleOk = () => {\r\n    onOk();\r\n    if (onFinally && typeof onFinally === 'function') onFinally();\r\n  }\r\n\r\n  const handleCancel = () => {\r\n    onCancel();\r\n    if (onFinally && typeof onFinally === 'function') onFinally();\r\n  }\r\n\r\n  confirm({\r\n    title: 'Вы подтверждаете действие ?',\r\n    icon: <ExclamationCircleOutlined />,\r\n    content: description,\r\n    okText: okText || 'Удалить',\r\n    okType: 'danger',\r\n    cancelText: 'Отмена',\r\n    onOk: handleOk,\r\n    onCancel: handleCancel,\r\n  });\r\n}\r\n\r\nexport default showConfirmModal;","import { Modal } from 'antd';\r\nimport {\r\n  BellOutlined,\r\n  DeleteFilled,\r\n  EditFilled,\r\n  ScheduleOutlined,\r\n  ScheduleFilled\r\n} from '@ant-design/icons';\r\nimport showConfirmModal from '../Modals/ConfirmModal';\r\nimport { TActionBody } from \"../../types/TApiActionBody\";\r\nimport { TData } from \"../../types/TData\";\r\nimport { TDropdownMenu } from \"../../types/TDropdownMenu\";\r\nimport { TTableParameters } from \"../../types/TTableParameters\";\r\nimport classes from './ActionMenu.module.scss';\r\nimport { TDictionary } from '../../types/TDictionary';\r\nimport { convertDataItem } from '../../utils/convertDataItem';\r\n// import { TObject } from '../../types/TObject';\r\n\r\ntype TModals = 'editItem' | 'addDiscussion' | 'deleteItem';\r\n\r\ninterface IMenu {\r\n  dataItem: TData;\r\n  metadata: TData[] | null;\r\n  tableParameters: TTableParameters;\r\n  handleOpen: (t: TModals) => void;\r\n  handleEdit: (data: TActionBody) => void;\r\n  handleDelete: (data: TActionBody) => void;\r\n  handleGetConnectedData: (data: TActionBody) => void;\r\n  dictionary: TDictionary;\r\n}\r\n\r\nconst handleDummyClick = () => {\r\n  Modal.info({\r\n    title: 'Информирование',\r\n    content: 'Тестовое уведомление было отправлено'\r\n  })\r\n};\r\n\r\nexport const createActions = ({\r\n    dataItem,\r\n    metadata,\r\n    tableParameters,\r\n    handleOpen,\r\n    handleEdit,\r\n    handleDelete,\r\n    handleGetConnectedData,\r\n    dictionary,\r\n  }: IMenu) => {\r\n  const actions: TDropdownMenu[] = [];\r\n\r\n  if (tableParameters.hasDiscussion) {\r\n    const handleOpenAddDiscussion = () => {\r\n      handleOpen('addDiscussion');\r\n    }\r\n\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-add-discussion`,\r\n      onClick: handleOpenAddDiscussion,\r\n      icon: <ScheduleOutlined className={classes['action-menu']}/>,\r\n      title: 'Добавить обсуждение',\r\n    });\r\n\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-show-discussions`,\r\n      onClick: () => handleGetConnectedData(dataItem),\r\n      icon: <ScheduleFilled className={classes['action-menu']}/>,\r\n      title: 'Проведённые обсуждения',\r\n    });\r\n    actions.push({ type: 'divider', key: 'divider-discussion' });\r\n  }\r\n\r\n  if (tableParameters.hasEditMenu) {\r\n    const handleOpenEditMenu = () => {\r\n      handleOpen('editItem');\r\n    }\r\n\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-edit`,\r\n      onClick: handleOpenEditMenu,\r\n      icon: <EditFilled className={classes['action-menu']} />,\r\n      title: 'Редактировать',\r\n    });\r\n  }\r\n\r\n  if (tableParameters.hasSetStatusMenu && metadata) {\r\n    actions.push({\r\n      type: 'submenu',\r\n      key: `action-menu-${dataItem.key}-status`,\r\n      title: 'Изменить статус',\r\n      items: Object.entries(dictionary?.status).map(([statusKey, statusInfo]) => {\r\n        const values = convertDataItem(dictionary, dataItem, metadata, 'table');\r\n\r\n        return ({\r\n          key: `action-menu-status-${statusKey}`,\r\n          title: statusInfo.text,\r\n          onClick: () => {\r\n            values.status = statusKey;\r\n            handleEdit(values);\r\n          },\r\n        })\r\n      })\r\n    });\r\n  }\r\n\r\n  if (tableParameters.hasDeleteButton) {\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-delete`,\r\n      onClick: () => {\r\n        showConfirmModal({\r\n          onOk: () => handleDelete(dataItem),\r\n          onCancel: () => console.log(''),\r\n          description: 'Вы подтверждаете удаление данных ?',\r\n        });\r\n      },\r\n      icon: <DeleteFilled className={classes['action-menu']} />,\r\n      title: 'Удалить',\r\n    });\r\n  }\r\n\r\n  if (tableParameters.hasNotificationButton) {\r\n    actions.push({ type: 'divider', key: 'divider-notification' });\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-notify`,\r\n      onClick: handleDummyClick,\r\n      icon: <BellOutlined className={classes['action-menu']} />,\r\n      title: 'Отправить уведомление',\r\n    });\r\n  }\r\n\r\n  return actions;\r\n}\r\n","import React from \"react\";\r\nimport { Menu } from 'antd';\r\nimport { TDropdownMenu } from '../../../types/TDropdownMenu';\r\nimport classes from './DropdownMenu.module.scss';\r\nimport './DropdownMenu.css';\r\n\r\nconst DropdownMenu: React.FC<{menuItems: TDropdownMenu[]}> = ({ menuItems }) => {\r\n  return (\r\n    <Menu\r\n      className={classes['dropdown-menu']}\r\n      defaultSelectedKeys={[]}\r\n      selectedKeys={[]}\r\n      activeKey=\"something\"\r\n    >\r\n      {\r\n        menuItems.map((menuItem, index) => (\r\n          menuItem.type === 'divider' ? (\r\n            <Menu.Divider key={`divider-${index}`}/>\r\n          ) : (\r\n            menuItem.type === 'submenu' ? (\r\n              <Menu.SubMenu\r\n                key={menuItem.key}\r\n                title={menuItem.title}\r\n              >\r\n                {\r\n                  menuItem.items && menuItem.items.map((subMenuItem) => (\r\n                    <Menu.Item\r\n                      key={subMenuItem.key}\r\n                      onClick={subMenuItem.onClick}\r\n                      icon={subMenuItem.icon}\r\n                    >\r\n                      {subMenuItem.title}\r\n                    </Menu.Item>\r\n                  ))\r\n                }\r\n              </Menu.SubMenu>\r\n            ) : (\r\n              <Menu.Item\r\n                key={menuItem.key}\r\n                onClick={menuItem.onClick}\r\n                icon={menuItem.icon}\r\n              >\r\n                {menuItem.title}\r\n              </Menu.Item>\r\n            ))\r\n          )\r\n        )\r\n      }\r\n    </Menu>\r\n  )\r\n}\r\n\r\nexport default DropdownMenu;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useMetadataSelector } from '../../../storages/selectors/metadata';\r\nimport { getTableParameters } from '../../../utils/getTableParameters';\r\nimport { convertDataItem } from '../../../utils/convertDataItem';\r\nimport { IFormItem } from '../../../types/IFormItem';\r\nimport { TData } from '../../../types/TData';\r\nimport { TButton } from '../../../types/TButton';\r\nimport { useDictionaryContext } from '../../../context/DictionaryContext';\r\nimport ModalWithForm from '../../UI/ModalWithForm';\r\n\r\ninterface IDataEditModal {\r\n  isOpen: boolean;\r\n  onEditHandler: (data: TData) => void;\r\n  onAddHandler?: (data: TData) => void;\r\n  onClose: () => void;\r\n  formData: TData;\r\n}\r\n\r\nconst DataEditModal: React.FC<IDataEditModal> = ({\r\n  isOpen,\r\n  onEditHandler,\r\n  onAddHandler,\r\n  onClose,\r\n  formData\r\n}) => {\r\n  const { dictionary } = useDictionaryContext();\r\n\r\n  const { data: metadata, isError, isLoading } = useMetadataSelector();\r\n\r\n  const [formItems, setFormItems] = useState<IFormItem[]>([]);\r\n  const [initialValues, setInitialValues] = useState<TData>(formData);\r\n\r\n  useEffect(() => {\r\n    if (formItems && formData && metadata) {\r\n      setInitialValues(convertDataItem(dictionary, formData, metadata, 'modalEdit'));\r\n    }\r\n  }, [formData, formItems, dictionary, metadata]);\r\n\r\n  useEffect(() => {\r\n    if (metadata) {\r\n      setFormItems(metadata\r\n        .filter((m) => m.id !== 'specificParameters')\r\n        .sort((a, b) => a.tableIndex - b.tableIndex)\r\n        .map((m) => {\r\n          return {\r\n            label: m.title,\r\n            name: m.id,\r\n            type: m.type,\r\n            // rules: m.addMenuIndex ? [{ required: true, message: 'Поле должно быть корректно заполнено!' }] : [],\r\n            rules: [],\r\n            disabled: !m.isEditable,\r\n          }\r\n      }));\r\n    }\r\n  }, [ metadata ]);\r\n\r\n  return (\r\n    metadata && !isError && !isLoading ? (\r\n      <ModalWithForm\r\n        title={getTableParameters(metadata).addMenuTitle || 'Добавить'}\r\n        okButtonTitle='Сохранить'\r\n        isOpen={isOpen}\r\n        handleOk={onEditHandler}\r\n        handleClose={onClose}\r\n        formItems={formItems}\r\n        initialValues={initialValues}\r\n        additionalButtons={[\r\n          {\r\n            onClick: onAddHandler,\r\n            title: 'Сохранить как новый'\r\n          } as TButton\r\n        ]}\r\n      />\r\n    ) : null\r\n  );\r\n};\r\n\r\nexport default DataEditModal;\r\n","import axios from \"axios\";\r\nimport { tuple } from \"antd/lib/_util/type\"\r\nimport { IFetchError } from \"../types/IFetchError\";\r\nimport { mainModes, urlApi } from \"../constants/constants\"\r\nimport Notification from \"../components/UI/Notification\";\r\n\r\nconst ModesType = tuple(...mainModes);\r\n\r\nexport class Api {\r\n  public static async getConnectedData (tablename: typeof ModesType[number], connectedTablename: typeof ModesType[number], id: string | number) {\r\n    try {\r\n      const result = await axios.get(`${urlApi}/${tablename}/get-${connectedTablename}/${id}`);\r\n      return result.data;\r\n    } catch (error) {\r\n      Notification({\r\n        type: 'error',\r\n        message: 'Ошибка при загрузке данных',\r\n        description: (error as IFetchError).message\r\n          ? (error as IFetchError).message\r\n          : (error as IFetchError).statusText,\r\n      });\r\n    }\r\n  }\r\n}\r\n","import { useCallback, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Dropdown, Tooltip } from 'antd';\r\nimport { CarryOutOutlined } from '@ant-design/icons';\r\nimport { TData } from '../../types/TData';\r\nimport { TTableParameters } from '../../types/TTableParameters';\r\nimport { TActionBody } from '../../types/TApiActionBody';\r\nimport { useMetadataSelector } from '../../storages/selectors/metadata';\r\nimport { dataAddAction, dataDeleteAction, dataUpdateAction } from '../../storages/actions/data';\r\nimport { createActions } from './createActions';\r\nimport DropdownMenu from '../UI/DropdownMenu';\r\nimport ModalWithList from '../UI/ModalWithList';\r\nimport DataEditModal from '../Modals/DataEditModal';\r\nimport DataAddModal from '../Modals/DataAddModal';\r\nimport { useDictionaryContext } from '../../context/DictionaryContext';\r\nimport { Api } from '../../utils/Api';\r\n\r\ntype TModals = 'editItem' | 'addDiscussion' | 'deleteItem';\r\n\r\ntype TActionMenu = {\r\n  title: string,\r\n  dataItem: TData,\r\n  tableParameters: TTableParameters,\r\n  tablename: string,\r\n};\r\n\r\nconst ActionMenu: React.FC<TActionMenu> = ({dataItem, title, tableParameters, tablename}) => {\r\n  const { dictionary } = useDictionaryContext();\r\n\r\n  const [openModal, setOpenModal] = useState<TModals>();\r\n\r\n  const { data: metadata } = useMetadataSelector();\r\n\r\n  const handleClose = () => setOpenModal(undefined);\r\n  const handleOpen = (t: TModals) => {\r\n    setOpenModal(t);\r\n  }\r\n\r\n  const handleEdit = (data: TActionBody) => dispatch(dataUpdateAction(tablename, data));\r\n  const handleDelete = (data: TActionBody) => dispatch(dataDeleteAction(tablename, data));\r\n  const handleAdd = (data: TActionBody) => {\r\n    delete data.id;\r\n    dispatch(dataAddAction(tablename, data));\r\n  }\r\n\r\n  const handleAddDiscussion = (data: TActionBody) => {\r\n    dispatch(dataAddAction('discussion', data));\r\n  }\r\n\r\n  const connectedTablename = 'discussion';\r\n  const handleGetConnectedData = useCallback(async (data: TActionBody) => {\r\n    const connectedData = await Api.getConnectedData(tablename, connectedTablename, +data.id);\r\n\r\n    if (connectedData) {\r\n      ModalWithList({\r\n        title: 'Обсуждения',\r\n        avatar: <CarryOutOutlined />,\r\n        dataSource: connectedData as {title: string, description: string}[],\r\n        noDataText: 'Ранее обсуждений не проводилось',\r\n      });\r\n    }\r\n  }, [tablename]);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const actions = createActions({\r\n    dataItem,\r\n    dictionary,\r\n    metadata,\r\n    tableParameters,\r\n    handleOpen,\r\n    handleDelete,\r\n    handleEdit,\r\n    handleGetConnectedData,\r\n  });\r\n\r\n  return (\r\n    actions.length ? (\r\n      <>\r\n        <DataEditModal\r\n          isOpen={openModal === 'editItem'}\r\n          onEditHandler={handleEdit}\r\n          onAddHandler={handleAdd}\r\n\r\n          onClose={handleClose}\r\n          formData={dataItem}\r\n        />\r\n\r\n        <DataAddModal\r\n          isOpen={openModal === 'addDiscussion'}\r\n          onAddHandler={handleAddDiscussion}\r\n          onClose={handleClose}\r\n          modalTablename='discussion'\r\n          modalInitialValues={{\r\n            theme: dataItem.text,\r\n            mainQuestions: dataItem.description\r\n          }}\r\n        />\r\n\r\n        <Tooltip placement='topRight' title={title}>\r\n          <Dropdown.Button\r\n            overlay={<DropdownMenu menuItems={actions} />}\r\n            trigger={['click']}\r\n          />\r\n        </Tooltip>\r\n      </>\r\n    ) : null\r\n  );\r\n};\r\n\r\nexport default ActionMenu;\r\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { ConfigProvider, Pagination, Table, Tag } from 'antd';\r\nimport { SortOrder } from 'antd/lib/table/interface';\r\nimport ruRU from 'antd/lib/locale/ru_RU';\r\nimport { TData } from '../../../types/TData';\r\nimport { TDictionary } from '../../../types/TDictionary';\r\nimport { TTableParameters } from '../../../types/TTableParameters';\r\nimport { TObject } from '../../../types/TObject';\r\nimport TableEditableRow from '../TableEditableRow';\r\nimport DataTableEditableCell from '../../TableEditableCell';\r\nimport TableExpandableRow from '../TableExpandableRow';\r\nimport TableFilterIcon from '../TableFilterIcon';\r\nimport ActionMenu from '../../ActionMenu';\r\nimport { usePrintPDFContext } from '../../../context/PrintPDFContext';\r\nimport { useFilterDrawer } from '../FilterPanel';\r\nimport { useColumnsDrawer } from '../ColumnsPanel';\r\nimport classes from './Table.module.scss';\r\nimport './Table.css';\r\n\r\ntype TTableProps = {\r\n  data: TData[],\r\n  columns: TData[],\r\n  tableParameters: TTableParameters,\r\n  tablename: string,\r\n  dictionary: TDictionary\r\n  invertDictionary: TObject<Record<string, string>>\r\n};\r\n\r\nconst PAGE_SIZE = 10;\r\n\r\nconst DataTable: React.FC<TTableProps> = ({\r\n  data,\r\n  columns,\r\n  tableParameters,\r\n  tablename,\r\n  dictionary,\r\n  invertDictionary\r\n}) => {\r\n  const { setDataPrintRef, setDataPrintMode, dataPrintMode } = usePrintPDFContext();\r\n  const dataRef = useRef<HTMLDivElement>(null)\r\n  const [page, setPage] = useState<number>(1);\r\n  const [pageSize, setPageSize] = useState<number>(PAGE_SIZE);\r\n\r\n  const hasActionMenu = tableParameters.hasActionMenu;\r\n\r\n  useEffect(() => {\r\n    if (dataRef) setDataPrintRef(dataRef)\r\n  }, [setDataPrintRef]);\r\n\r\n  const sourceData = useMemo(() => {\r\n    return data.map((dataItem, index) => {\r\n      return {\r\n        ...dataItem,\r\n        key: `table-row-${dataItem.id}-${index}`,\r\n        action: hasActionMenu\r\n        ? <ActionMenu\r\n            key={`action-menu-${dataItem.id}-${index}`}\r\n            title='Меню действий'\r\n            dataItem={dataItem}\r\n            tableParameters={tableParameters}\r\n            tablename={tablename}\r\n          />\r\n        : null\r\n      }\r\n    })\r\n  }, [data, tableParameters, hasActionMenu, tablename])\r\n\r\n  const getDefaultSorter = (field: string) => {\r\n    if (Array.isArray(tableParameters.defaultSortField)) {\r\n      const index = tableParameters.defaultSortField.indexOf(field);\r\n\r\n      return index < 0\r\n        ? undefined\r\n        : (tableParameters.defaultSortDirection as string[])[index];\r\n    }\r\n    return field === tableParameters.defaultSortField\r\n      ? tableParameters.defaultSortDirection\r\n      : undefined;\r\n  }\r\n\r\n  const {\r\n    ColumnsPanelButtons,\r\n    ColumnsPanel,\r\n    columnsData\r\n  } = useColumnsDrawer(columns);\r\n\r\n  const tableColumns: TData[] = columnsData\r\n    .map((column) => {\r\n      return !column.isInlineEditable\r\n        ? {\r\n            ...column,\r\n            defaultSortOrder: (getDefaultSorter(column.dataIndex)) as SortOrder,\r\n            sortOrder: (getDefaultSorter(column.dataIndex)) as SortOrder,\r\n            filterIcon: TableFilterIcon,\r\n            render: (text: string, record: TData) => {\r\n              const columnId = column.dataIndex;\r\n              const tableValue = record[columnId];\r\n              const originalValue = invertDictionary[columnId] && invertDictionary[columnId][tableValue]\r\n                ? invertDictionary[columnId][tableValue]\r\n                : tableValue;\r\n\r\n              return column.isTagged\r\n                ? <Tag color={dictionary[columnId][originalValue]?.tag}>{text}</Tag>\r\n                : text\r\n            }\r\n          }\r\n          : {\r\n            ...column,\r\n            defaultSortOrder: (getDefaultSorter(column.dataIndex)) as SortOrder,\r\n            sortOrder: (getDefaultSorter(column.dataIndex)) as SortOrder,\r\n            filterIcon: TableFilterIcon,\r\n            onCell: (record: any) => ({\r\n              record,\r\n              editable: column.isInlineEditable,\r\n              dataIndex: column.dataIndex,\r\n              title: column.title,\r\n            }),\r\n          }\r\n      }\r\n    )\r\n\r\n  if (hasActionMenu) tableColumns.push({\r\n    dataIndex: 'action',\r\n    key: 'action',\r\n    isInlineEditable: false,\r\n    showInTable: true,\r\n    type: 'action',\r\n    className: 'table-action-column',\r\n  })\r\n\r\n  tableColumns.forEach((tableColumn) => {\r\n    if (tableColumn.dataIndex !== 'action') {\r\n      tableColumn.className = classes[`table-title-row-${Math.ceil(((tableColumn.title?.length ?? 1)*7 + 48)/10)*10}`];\r\n    }\r\n  })\r\n\r\n  const {\r\n    FilterButtons,\r\n    FilterPanel,\r\n    filterData\r\n  } = useFilterDrawer(columnsData, sourceData);\r\n\r\n  const handleChangePage = useCallback((nextPage: number, pageSize: number) => {\r\n    setPage(nextPage);\r\n    setPageSize(pageSize);\r\n  }, [])\r\n\r\n  const TableTitle = useCallback(() => (\r\n    <div className={classes['table-title']}>\r\n      <div>\r\n        {FilterButtons}\r\n\r\n        {ColumnsPanelButtons}\r\n      </div>\r\n\r\n      <Pagination\r\n        showSizeChanger\r\n        current={page}\r\n        pageSize={pageSize}\r\n        onChange={handleChangePage}\r\n        total={(filterData || []).length}\r\n      />\r\n    </div>\r\n  ), [\r\n    FilterButtons,\r\n    ColumnsPanelButtons,\r\n    filterData,\r\n    page,\r\n    pageSize,\r\n    handleChangePage\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (dataPrintMode === 'all') {\r\n      setPageSize(0);\r\n      setDataPrintMode('print');\r\n    } else if (dataPrintMode === 'current') {\r\n    } else {\r\n      setPageSize(PAGE_SIZE);\r\n    }\r\n  }, [filterData, pageSize, dataPrintMode, setDataPrintMode])\r\n\r\n  return (\r\n    // <>\r\n    <ConfigProvider locale={ruRU}>\r\n      {FilterPanel}\r\n\r\n      {ColumnsPanel}\r\n\r\n      <Table\r\n        ref={dataRef}\r\n        dataSource={ filterData }\r\n        columns={ tableColumns }\r\n        title={TableTitle}\r\n        // scroll={{x: 'max-content'}}\r\n        tableLayout='auto'\r\n        components={{\r\n          body: {\r\n            row: TableEditableRow,\r\n            cell: DataTableEditableCell\r\n          },\r\n        }}\r\n        rowClassName={() => 'editable-row'}\r\n        bordered={ false }\r\n        loading={ false }\r\n        size='large'\r\n        expandable={ TableExpandableRow('description') }\r\n        // expandIcon\r\n        sticky={ true }\r\n        pagination={{\r\n          position: ['topRight'],\r\n          pageSize: pageSize,\r\n          current: page,\r\n          total: filterData.length,\r\n          className: classes['hidden-pagination']\r\n        }}\r\n        className={ classes.table }\r\n      />\r\n    </ConfigProvider>\r\n    // </>\r\n  );\r\n}\r\n\r\nexport default DataTable;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\"\r\nimport { Button, Drawer, Tooltip, Form, Checkbox } from \"antd\";\r\nimport { OrderedListOutlined } from '@ant-design/icons';\r\nimport { TData } from \"../../../types/TData\";\r\nimport { IFormItem } from \"../../../types/IFormItem\";\r\nimport classes from './ColumnsPanel.module.scss';\r\n\r\nexport const useColumnsDrawer = (metadata: TData[], initialVisible: boolean = false) => {\r\n  const [columnsData, setColumnsData] = useState<TData[]>([]);\r\n  const [visible, setVisible] = useState<boolean>(initialVisible);\r\n  const [form] = Form.useForm();\r\n\r\n  useEffect(() => {\r\n    if (metadata) setColumnsData(metadata)\r\n  }, [metadata]);\r\n\r\n  const openPanel = useCallback(() => setVisible(true), []);\r\n  const closePanel = useCallback(() => setVisible(false), []);\r\n\r\n  const resetColumns = useCallback(() => {\r\n    setColumnsData(metadata);\r\n    form.setFields(metadata.map(({dataIndex, showInTable}) => ({\r\n      name: dataIndex,\r\n      value: showInTable,\r\n    })));\r\n  }, [form, metadata]);\r\n\r\n  const handleSubmit = useCallback((values: any) => {\r\n    setColumnsData((prev) => {\r\n      return prev.map((columnData) => {\r\n        return {\r\n          ...columnData,\r\n          showInTable: values[columnData.dataIndex] ?? false\r\n        }\r\n      })\r\n    });\r\n    closePanel();\r\n  }, [closePanel]);\r\n\r\n  const ColumnsPanelButtons = useMemo<JSX.Element>(() => (\r\n    <Tooltip\r\n      placement='topRight'\r\n      title='Выбрать колонки'\r\n    >\r\n      <Button\r\n        onClick={openPanel}\r\n        className={classes['select-columns-button']}\r\n        icon={<OrderedListOutlined style={{ fontSize: '20px' }}/>}\r\n      />\r\n    </Tooltip>\r\n  ), [openPanel]);\r\n\r\n  const ColumnsPanel = useMemo(() => (\r\n    <Drawer\r\n      title='Колонки'\r\n      placement=\"right\"\r\n      onClose={closePanel}\r\n      visible={visible}\r\n      width={250}\r\n    >\r\n      <Form\r\n        name='basic'\r\n        preserve={false}\r\n        labelCol={{ span: 20 }}\r\n        wrapperCol={{ span: 4 }}\r\n        onFinish={handleSubmit}\r\n        onFinishFailed={console.log}\r\n        form={form}\r\n      >\r\n        <Form.Item wrapperCol={{ span: 24 }}>\r\n          <Button onClick={resetColumns} style={{width: '100%'}}>По умолчанию</Button>\r\n        </Form.Item>\r\n\r\n        {\r\n          columnsData\r\n            .map((columnData: TData) => {\r\n              const formItem: IFormItem = {\r\n                name: columnData.dataIndex,\r\n                label: columnData.title,\r\n                type: columnData.type,\r\n                disabled: false,\r\n              }\r\n\r\n              return (\r\n                <Form.Item\r\n                  key={formItem.name}\r\n                  label={formItem.label}\r\n                  name={formItem.name}\r\n                  valuePropName=\"checked\"\r\n                  initialValue={columnData.showInTable}\r\n                  style={{marginBottom: '12px'}}\r\n                >\r\n                  <Checkbox value={true}/>\r\n                </Form.Item>\r\n              );\r\n            })\r\n        }\r\n\r\n        <Form.Item wrapperCol={{ span: 24 }} style={{marginTop: '30px'}}>\r\n          <Button type=\"primary\" htmlType=\"submit\" style={{width: '100%'}}>Применить</Button>\r\n        </Form.Item>\r\n\r\n      </Form>\r\n    </Drawer>\r\n  ), [\r\n    form,\r\n    columnsData,\r\n    visible,\r\n    closePanel,\r\n    resetColumns,\r\n    handleSubmit,\r\n  ]);\r\n\r\n  const data = useMemo(() => (columnsData ?? []).filter((d) => d.showInTable), [columnsData]);\r\n\r\n  return {\r\n    ColumnsPanelButtons,\r\n    ColumnsPanel,\r\n    columnsData: data\r\n  };\r\n}\r\n","import { useCallback, useMemo, useState } from \"react\"\r\nimport {\r\n  Button,\r\n  Drawer,\r\n  Tooltip,\r\n  Form,\r\n  Input,\r\n  Select,\r\n  DatePicker,\r\n  TimePicker,\r\n  Col,\r\n  Row,\r\n  Checkbox\r\n} from \"antd\";\r\nimport { FilterOutlined, FilterFilled } from '@ant-design/icons';\r\nimport { TData } from \"../../../types/TData\";\r\nimport { IFormItem } from \"../../../types/IFormItem\";\r\nimport { useDictionaryContext } from \"../../../context/DictionaryContext\";\r\nimport classes from './FilterPanel.module.scss';\r\n\r\nexport const useFilterDrawer = (tableColumns: TData[], sourceData: TData[], initialVisible = false) => {\r\n  const { dictionary } = useDictionaryContext();\r\n\r\n  const [visibleResetButton, setVisibleResetButton] = useState<boolean>(false);\r\n  const [filterData, setFilterData] = useState<TData[]>();\r\n  const [visible, setVisible] = useState<boolean>(initialVisible);\r\n  const [form] = Form.useForm();\r\n\r\n  const openPanel = useCallback((e: any) => {\r\n    setVisible(true);\r\n  }, []);\r\n\r\n  const closePanel = useCallback(() => {\r\n    setVisible(false);\r\n  }, []);\r\n\r\n  const data = useMemo(() => filterData ?? sourceData, [filterData, sourceData]);\r\n\r\n  const handleReset = useCallback(() => {\r\n    setFilterData(sourceData);\r\n    setVisibleResetButton(false);\r\n    form.resetFields();\r\n  }, [sourceData, form]);\r\n\r\n  const handleSubmit = useCallback((values: any) => {\r\n    setVisibleResetButton(false);\r\n    setFilterData(sourceData\r\n      .filter((data: TData) => {\r\n        return Object.keys(data).reduce((acc, key) => {\r\n          let value = dictionary && dictionary[key] ? dictionary[key][values[key]].text : values[key];\r\n          if (typeof data[key] === 'number') value = +value;\r\n          if (typeof data[key] === 'boolean') value = !!value;\r\n          if (value) setVisibleResetButton(true);\r\n          return acc\r\n            && (\r\n                (typeof data[key] === 'boolean' && data[key] === value) ||\r\n                (!value && typeof data[key] !== 'boolean') ||\r\n                (value && data[key] && data[key] === value)\r\n              )\r\n        }, true)\r\n      })\r\n    )\r\n    closePanel();\r\n  }, [dictionary, sourceData, closePanel]);\r\n\r\n  const FilterButtons = useMemo<JSX.Element>(() => (\r\n    <div>\r\n      <Tooltip\r\n        placement='topRight'\r\n        title='Показать фильтры'\r\n      >\r\n        <Button\r\n          onClick={openPanel}\r\n          className={classes['filter-button']}\r\n        >\r\n          {\r\n            visibleResetButton ?\r\n            <FilterFilled style={{ fontSize: '20px' }}/> :\r\n            <FilterOutlined style={{ fontSize: '20px' }}/>\r\n          }\r\n        </Button>\r\n      </Tooltip>\r\n      <Button\r\n        onClick={handleReset}\r\n        className={classes['reset-filter-button']}\r\n        style={{display: visibleResetButton ? 'inline' : 'none'}}\r\n      >\r\n        Сбросить фильтры\r\n      </Button>\r\n    </div>\r\n  ), [openPanel, handleReset, visibleResetButton]);\r\n\r\n  const FilterPanel = useMemo(() => (\r\n    <Drawer\r\n      title='Фильтры'\r\n      placement=\"right\"\r\n      onClose={closePanel}\r\n      visible={visible}\r\n      width={430}\r\n    >\r\n      <Form\r\n        name='basic'\r\n        preserve={false}\r\n        labelCol={{ span: 8 }}\r\n        wrapperCol={{ span: 16 }}\r\n        // initialValues={initialValues ? initialValues : {}}\r\n        onFinish={handleSubmit}\r\n        form={form}\r\n      >\r\n        {\r\n          tableColumns\r\n            .filter((tableColumn) => tableColumn.isFilter)\r\n            .map((tableColumn: TData) => {\r\n              const formItem: IFormItem = {\r\n                name: tableColumn.dataIndex,\r\n                label: tableColumn.title,\r\n                type: tableColumn.type,\r\n                disabled: false\r\n              }\r\n\r\n              return (\r\n                <Form.Item\r\n                  key={formItem.name}\r\n                  label={formItem.label}\r\n                  name={formItem.name}\r\n                  valuePropName={formItem.type === 'checkbox' ? 'checked' : 'value'}\r\n                >\r\n                  {\r\n                    (['string', 'number'].includes(formItem.type)) ?\r\n                      <Input /> :\r\n                    formItem.type === 'fulltext' ?\r\n                      <Input.TextArea /> :\r\n                    formItem.type === 'checkbox' ?\r\n                      <Checkbox value={true} /> :\r\n                    (['select', 'multi-select'].includes(formItem.type)) && dictionary[formItem.name] ? (\r\n                      <Select\r\n                        allowClear\r\n                        filterOption={(value: string, option) => RegExp(value, 'i').test(`${option?.label}`)}\r\n                        mode={formItem.type === 'multi-select' ? 'multiple' : undefined}\r\n                        showSearch\r\n                        options={Object.entries(dictionary[formItem.name]).map(([value, info]) => (\r\n                          { value, label: info.text }\r\n                        ))}\r\n                      />\r\n                    ) :\r\n                    formItem.type === 'date' ?\r\n                      <DatePicker format=\"YYYY-MM-DD\" /> :\r\n                    formItem.type === 'datetime' ?\r\n                      <DatePicker format=\"YYYY-MM-DD HH:mm:ss\" showTime /> :\r\n                    formItem.type === 'time' ?\r\n                      <TimePicker format=\"HH:mm:ss\" /> :\r\n                    null\r\n                  }\r\n                </Form.Item>\r\n              );\r\n            })\r\n        }\r\n\r\n        <Form.Item wrapperCol={{ span: 24 }} style={{marginTop: '50px'}}>\r\n          <Row>\r\n            <Col span={12}>\r\n              <Button onClick={handleReset}>Сбросить</Button>\r\n            </Col>\r\n            <Col span={12} style={{textAlign: 'right'}}>\r\n              <Button type=\"primary\" htmlType=\"submit\">Применить</Button>\r\n            </Col>\r\n          </Row>\r\n        </Form.Item>\r\n      </Form>\r\n    </Drawer>\r\n  ), [\r\n    form,\r\n    dictionary,\r\n    tableColumns,\r\n    visible,\r\n    closePanel,\r\n    handleReset,\r\n    handleSubmit,\r\n  ]);\r\n\r\n  return {\r\n    FilterButtons,\r\n    FilterPanel,\r\n    filterData: data\r\n  };\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Typography } from 'antd';\r\nimport { TTableParameters } from '../../types/TTableParameters';\r\nimport { mapMetadataToColumns } from '../../utils/mapMetadataToColumns';\r\nimport { useGetDataMeta } from '../../utils/hooks/useGetDataMeta';\r\nimport { getTableParameters } from '../../utils/getTableParameters';\r\nimport { useGetTablename } from '../../utils/hooks/useGetTablename';\r\nimport Table from '../UI/Table';\r\nimport LoadingComponent from '../UI/LoadingComponent';\r\nimport { useDictionaryContext } from '../../context/DictionaryContext';\r\nimport classes from './DataTable.module.scss';\r\n\r\nconst { Title } = Typography;\r\n\r\nconst DataTable: React.FC = () => {\r\n  const [tableParameters, setTableParameters] = useState<TTableParameters | null>(null);\r\n\r\n  const tablename = useGetTablename();\r\n  const { dictionary, invertDictionary } = useDictionaryContext();\r\n\r\n  const {\r\n    data: sourceData, isErrorData, isLoadingData,\r\n    metadata, isErrorMetadata, isLoadingMetadata\r\n  } = useGetDataMeta(tablename);\r\n\r\n  useEffect(() => {\r\n    if (metadata) {\r\n      setTableParameters(getTableParameters(metadata));\r\n    }\r\n  }, [metadata]);\r\n\r\n  return (\r\n    isLoadingData || isLoadingMetadata ? (\r\n      <div className={classes.center}>\r\n        <LoadingComponent />\r\n      </div>\r\n    ) : (\r\n      (isErrorData || isErrorMetadata) && !sourceData ? (\r\n        <div className={classes.center}>\r\n          <Title level={3}>Ошибка получения данных</Title>\r\n        </div>\r\n      ) : (\r\n        sourceData && metadata && tableParameters &&\r\n          <Table\r\n            data={sourceData}\r\n            columns={mapMetadataToColumns(metadata)}\r\n            tableParameters={tableParameters}\r\n            tablename={tablename}\r\n            dictionary={dictionary}\r\n            invertDictionary={invertDictionary}\r\n          />\r\n      )\r\n    )\r\n  )\r\n}\r\n\r\nexport default DataTable\r\n"],"sourceRoot":""}