{"version":3,"sources":["utils/sortData.ts","utils/hooks/useGetDataMeta.tsx","components/UI/ModalWithList.tsx","components/UI/Table/Table.module.scss","components/UI/TableEditableCell/TableEditableCell.module.scss","components/ActionMenu/ActionMenu.module.scss","components/UI/DropdownMenu/DropdownMenu.module.scss","components/UI/FilterPanel/FilterPanel.module.scss","components/UI/ColumnsPanel/ColumnsPanel.module.scss","components/DataTable/DataTable.module.scss","utils/mapMetadataToColumns.ts","components/UI/TableEditableRow/index.tsx","components/UI/TableEditableCell/index.tsx","components/TableEditableCell/index.tsx","components/UI/TableExpandableRow.tsx","components/UI/TableFilterIcon.tsx","components/Modals/ConfirmModal/index.tsx","components/ActionMenu/createActions.tsx","components/UI/DropdownMenu/index.tsx","components/Modals/DataEditModal/index.tsx","utils/Api.ts","components/ActionMenu/index.tsx","utils/getTableWithPseudoFields.ts","components/UI/Table/index.tsx","components/UI/ColumnsPanel/index.tsx","utils/addActionColumnInfo.ts","utils/updateTableColumnsWidth.ts","components/UI/FilterPanel/index.tsx","components/DataTable/index.tsx"],"names":["sortData","key","direction","type","a","b","valueA","valueB","useGetDataMeta","tablename","useState","data","setData","useDictionaryContext","dictionary","setDictionary","useDataSelector","sourceData","isErrorData","isError","isLoadingData","isLoading","useMetadataSelector","metadata","isErrorMetadata","isLoadingMetadata","dispatch","useDispatch","mapDictionaryCb","useCallback","value","metadataProperty","find","property","id","split","map","v","text","join","includes","useEffect","dataGetAction","metadataGetAction","filter","forEach","validValues","Object","keys","length","d","mapValues","ModalWithList","title","dataSource","noDataText","avatar","width","Modal","info","content","renderItem","item","Item","Meta","description","index","module","exports","mapMetadataToColumns","c","metadataColumn","dataIndex","sorter","compare","undefined","multiple","sort","tableIndex","EditableContext","createContext","DataTableEditableRow","props","Form","useForm","form","component","Provider","TableEditableCell","inputRef","editing","editable","children","handleSave","record","handleToggleEdit","restProps","childNode","style","margin","name","rules","required","message","ref","onPressEnter","onBlur","className","classes","paddingRight","onClick","DataTableEditableCell","useGetTablename","setEditing","useRef","useContext","current","focus","setFieldsValue","save","validateFields","values","dataUpdateAction","convertDataItem","console","log","TableExpandableRow","rowExpandable","expandedRowRender","TableFilterIcon","filtered","placement","FilterOutlined","fontSize","color","confirm","showConfirmModal","onOk","onCancel","onFinally","okText","icon","ExclamationCircleOutlined","okType","cancelText","handleDummyClick","DropdownMenu","menuItems","defaultSelectedKeys","selectedKeys","activeKey","menuItem","Divider","SubMenu","items","subMenuItem","DataEditModal","isOpen","onEditHandler","onAddHandler","onClose","formData","formItems","setFormItems","initialValues","setInitialValues","m","isPseudo","label","disabled","isEditable","ModalWithForm","getTableParameters","addMenuTitle","okButtonTitle","handleOk","handleClose","additionalButtons","Api","tuple","mainModes","connectedTablename","axios","get","urlApi","result","Notification","statusText","ActionMenu","dataItem","tableParameters","openModal","setOpenModal","handleEdit","handleGetConnectedData","getConnectedData","connectedData","CarryOutOutlined","actions","handleOpen","handleDelete","hasDiscussion","push","ScheduleOutlined","ScheduleFilled","hasEditMenu","EditFilled","hasSetStatusMenu","entries","status","statusKey","statusInfo","hasDeleteButton","DeleteFilled","hasNotificationButton","BellOutlined","createActions","t","dataDeleteAction","dataAddAction","DataAddModal","modalTablename","modalInitialValues","theme","mainQuestions","Button","overlay","trigger","moment","locale","getTableWithPseudoFields","columns","dataInfo","column","pseudoFieldFormula","Date","date","format","error","DataTable","invertDictionary","usePrintPDFContext","setDataPrintRef","setDataPrintMode","dataPrintMode","dataRef","page","setPage","pageSize","setPageSize","defaultSort","setDefaultSort","hasActionMenu","useMemo","action","initialVisible","columnsData","setColumnsData","visible","setVisible","openPanel","closePanel","resetColumns","setFields","showInTable","handleSubmit","prev","columnData","ColumnsPanelButtons","OrderedListOutlined","ColumnsPanel","preserve","labelCol","span","wrapperCol","onFinish","onFinishFailed","formItem","valuePropName","initialValue","marginBottom","marginTop","htmlType","useColumnsDrawer","tableColumns","tableColumn","filterIcon","isInlineEditable","onCell","render","columnId","tableValue","originalValue","isTagged","tag","sortOrder","field","Array","isArray","defaultSortField","indexOf","defaultSortDirection","getDefaultSorter","addActionColumnInfo","Math","ceil","updateTableColumnsWidth","visibleResetButton","setVisibleResetButton","filterData","setFilterData","e","handleReset","resetFields","reduce","acc","FilterButtons","FilterFilled","display","FilterPanel","isFilter","TextArea","allowClear","filterOption","option","RegExp","test","mode","showSearch","options","showTime","textAlign","useFilterDrawer","handleChangePage","nextPage","TableTitle","showSizeChanger","onChange","total","ruRU","tableLayout","components","body","row","TableEditableRow","cell","rowClassName","bordered","loading","size","expandable","sticky","pagination","position","table","Title","Typography","setTableParameters","center","LoadingComponent","level"],"mappings":"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","file":"static/js/5.6e4ff14e.chunk.js","sourcesContent":["import { TData } from \"../types/TData\";\r\nimport { TDataTypes } from \"../types/TDataTypes\";\r\n\r\nconst sortData =\r\n  (key: string, direction: \"ascend\" | \"descend\" = \"ascend\", type?: TDataTypes) =>\r\n  (a: TData, b: TData) =>\r\n  {\r\n    const valueA = type && type === 'number' ? +a[key] : a[key];\r\n    const valueB = type && type === 'number' ? +b[key] : b[key];\r\n\r\n    if (valueA < valueB) return direction === \"ascend\" ? -1 : 1;\r\n    if (valueA > valueB) return direction === \"ascend\" ? 1 : -1;\r\n    return 0;\r\n  }\r\n\r\nexport default sortData;\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { mapValues } from \"lodash\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useDataSelector } from \"../../storages/selectors/data\";\r\nimport { useMetadataSelector } from \"../../storages/selectors/metadata\";\r\nimport { dataGetAction } from \"../../storages/actions/data\";\r\nimport { metadataGetAction } from \"../../storages/actions/metadata\";\r\nimport { useDictionaryContext } from \"../../context/DictionaryContext\";\r\nimport { TData } from \"../../types/TData\";\r\n\r\nexport const useGetDataMeta = (tablename: string) => {\r\n  const [ data, setData ] = useState<TData[]>([]);\r\n  const { dictionary, setDictionary } = useDictionaryContext();\r\n\r\n  const { data: sourceData, isError: isErrorData, isLoading: isLoadingData } = useDataSelector();\r\n  const { data: metadata, isError: isErrorMetadata, isLoading: isLoadingMetadata } = useMetadataSelector();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const mapDictionaryCb = useCallback((value: string, key: string) => {\r\n    const metadataProperty = metadata?.find((property) => property.id === key);\r\n    if (metadataProperty && metadataProperty.type === 'multi-select' && dictionary[key]){\r\n      return value.split(',').map((v) => dictionary[key][v].text).join(', ')\r\n    } else if (metadataProperty && ['select', 'checkbox'].includes(metadataProperty.type)  && dictionary[key] && dictionary[key][value]) {\r\n      return dictionary[key][value].text\r\n    }\r\n    return value;\r\n  }, [metadata, dictionary])\r\n\r\n  useEffect(() => {\r\n    dispatch(dataGetAction(tablename));\r\n    dispatch(metadataGetAction(tablename));\r\n  }, [tablename, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (metadata) {\r\n      metadata\r\n        .filter((property) => ['select', 'multi-select', 'checkbox'].includes(property.type))\r\n        .forEach((property) => setDictionary(property.id, property.validValues))\r\n    }\r\n  }, [metadata, setDictionary]);\r\n\r\n  useEffect(() => {\r\n    if (sourceData && metadata && Object.keys(dictionary).length) {\r\n      setData(() => sourceData.map((d) => mapValues(d, mapDictionaryCb)));\r\n    }\r\n  }, [sourceData, metadata, dictionary, mapDictionaryCb]);\r\n\r\n  return {\r\n    data, isErrorData, isLoadingData,\r\n    metadata, isErrorMetadata, isLoadingMetadata\r\n  }\r\n}\r\n","import { List, Modal } from \"antd\";\r\n\r\ninterface IModalWithList {\r\n  title: string;\r\n  dataSource?: {title: string, description: string}[],\r\n  noDataText?: string,\r\n  avatar?: React.ReactNode,\r\n  width?: number,\r\n};\r\n\r\nconst ModalWithList = ({\r\n  title,\r\n  dataSource = [],\r\n  noDataText = 'Нет данных',\r\n  avatar = null,\r\n  width = 600,\r\n}: IModalWithList) => {\r\n  if (dataSource && dataSource.length) {\r\n    Modal.info({\r\n      title,\r\n      content: (\r\n        <List\r\n          dataSource={dataSource}\r\n          renderItem={(item) => (\r\n            <List.Item>\r\n              <List.Item.Meta\r\n                avatar={avatar}\r\n                title={item.title}\r\n                description={item.description.split('\\n').map((text, index) => <div key={index}>{text}</div>)}\r\n              />\r\n            </List.Item>\r\n          )}\r\n        />\r\n      ),\r\n      width: `${width}px`\r\n    });\r\n  } else {\r\n    Modal.info({\r\n      title,\r\n      content: noDataText,\r\n      width: `${width}px`\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default ModalWithList;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"Table_table__3RMoX\",\"hidden-pagination\":\"Table_hidden-pagination__3y5Zo\",\"table-title\":\"Table_table-title__2Rdcb\",\"table-title-row-10\":\"Table_table-title-row-10__2UTBH\",\"table-title-row-20\":\"Table_table-title-row-20__3eD46\",\"table-title-row-30\":\"Table_table-title-row-30__2Zw_q\",\"table-title-row-40\":\"Table_table-title-row-40__3YZXE\",\"table-title-row-50\":\"Table_table-title-row-50__EDFiG\",\"table-title-row-60\":\"Table_table-title-row-60__1apef\",\"table-title-row-70\":\"Table_table-title-row-70__2xsdo\",\"table-title-row-80\":\"Table_table-title-row-80__3EVn2\",\"table-title-row-90\":\"Table_table-title-row-90__IyfPo\",\"table-title-row-100\":\"Table_table-title-row-100__29P3U\",\"table-title-row-110\":\"Table_table-title-row-110__2Qni0\",\"table-title-row-120\":\"Table_table-title-row-120__3zTSb\",\"table-title-row-130\":\"Table_table-title-row-130__lOny3\",\"table-title-row-140\":\"Table_table-title-row-140__1C6Fe\",\"table-title-row-150\":\"Table_table-title-row-150__1kRW3\",\"table-title-row-160\":\"Table_table-title-row-160__XAbUV\",\"table-title-row-170\":\"Table_table-title-row-170__1O8_m\",\"table-title-row-180\":\"Table_table-title-row-180__38rnB\",\"table-title-row-190\":\"Table_table-title-row-190__11sYK\",\"table-title-row-200\":\"Table_table-title-row-200__1rFw_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editable-cell\":\"TableEditableCell_editable-cell__LXwkw\",\"editable-cell-value-wrap\":\"TableEditableCell_editable-cell-value-wrap__1BVb7\",\"editable-row\":\"TableEditableCell_editable-row__2ctbF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"action-menu\":\"ActionMenu_action-menu__1Quqs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropdown-menu\":\"DropdownMenu_dropdown-menu__2hkVv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filter-button\":\"FilterPanel_filter-button__3r320\",\"reset-filter-button\":\"FilterPanel_reset-filter-button__3mx_s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"select-columns-button\":\"ColumnsPanel_select-columns-button__3wepJ\",\"reset-select-columns-button\":\"ColumnsPanel_reset-select-columns-button__2E4XD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"center\":\"DataTable_center__-2FaP\"};","import sortData from './sortData';\r\nimport { TColumn } from '../types/TColumn';\r\nimport { TData } from '../types/TData';\r\n\r\ntype TMapMetadataToColumns = (\r\n  metadata: TData[],\r\n) => Record<string, TColumn>[]\r\n\r\nexport const mapMetadataToColumns: TMapMetadataToColumns = (metadata) => {\r\n  const columns = metadata\r\n    .filter((c) => c.id !== 'specificParameters')\r\n    .map((metadataColumn) => {\r\n      const column: TData = {\r\n        ...metadataColumn,\r\n        dataIndex: metadataColumn.id,\r\n        key: metadataColumn.id,\r\n        sorter: {\r\n          compare: sortData(metadataColumn.id, undefined, metadataColumn.type),\r\n          multiple: 1,\r\n        },\r\n      }\r\n\r\n      return column;\r\n    })\r\n    .sort((a, b) => a.tableIndex - b.tableIndex)\r\n    // .filter((c: any) => !filterRealColumns || (filterRealColumns && c.showInTable && c.type !== 'fulltext'))\r\n\r\n  return columns;\r\n}\r\n","import { createContext } from 'react';\r\nimport { Form } from 'antd';\r\nimport { FormInstance } from 'antd/lib/form';\r\n\r\nexport const EditableContext = createContext<FormInstance<any> | null>(null);\r\n\r\ninterface IEditableRowProps {\r\n  id: number;\r\n}\r\n\r\nconst DataTableEditableRow: React.FC<IEditableRowProps> = ({ id, ...props }) => {\r\n  const [form] = Form.useForm();\r\n  return (\r\n    <Form form={form} component={false}>\r\n      <EditableContext.Provider value={form}>\r\n        <tr {...props} />\r\n      </EditableContext.Provider>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default DataTableEditableRow;\r\n","import React from 'react';\r\nimport { Form, Input } from 'antd';\r\nimport classes from './TableEditableCell.module.scss';\r\n\r\ninterface Item {\r\n  key: string;\r\n  name: string;\r\n  age: string;\r\n  address: string;\r\n}\r\n\r\ninterface EditableCellProps {\r\n  title: React.ReactNode;\r\n  inputRef: React.RefObject<Input>;\r\n  editing: boolean;\r\n  editable: boolean;\r\n  children: React.ReactNode;\r\n  dataIndex: keyof Item;\r\n  record: Item;\r\n  handleSave: () => void;\r\n  handleToggleEdit: () => void;\r\n}\r\n\r\nconst TableEditableCell: React.FC<EditableCellProps> = ({\r\n  title,\r\n  inputRef,\r\n  editing,\r\n  editable,\r\n  children,\r\n  dataIndex,\r\n  record,\r\n  handleSave,\r\n  handleToggleEdit,\r\n  ...restProps\r\n}) => {\r\n  let childNode = children;\r\n\r\n  if (editable) {\r\n    childNode = editing ? (\r\n      <Form.Item\r\n        style={{ margin: 0 }}\r\n        name={ dataIndex }\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: `${title} is required.`,\r\n          },\r\n        ]}\r\n      >\r\n        <Input\r\n          ref={inputRef}\r\n          onPressEnter={handleSave}\r\n          onBlur={handleSave}\r\n        />\r\n      </Form.Item>\r\n    ) : (\r\n      <div\r\n        className={classes[\"editable-cell-value-wrap\"]}\r\n        style={{ paddingRight: 24 }}\r\n        onClick={handleToggleEdit}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <td {...restProps}>{childNode}</td>;\r\n};\r\n\r\nexport default TableEditableCell;\r\n","import React, { useState, useEffect, useRef, useContext } from 'react';\r\nimport { Input } from 'antd';\r\nimport { useDispatch } from 'react-redux';\r\nimport { EditableContext } from '../UI/TableEditableRow';\r\nimport { convertDataItem } from '../../utils/convertDataItem';\r\nimport { useGetTablename } from '../../utils/hooks/useGetTablename';\r\nimport { useDictionaryContext } from '../../context/DictionaryContext';\r\nimport { dataUpdateAction } from '../../storages/actions/data';\r\nimport { useMetadataSelector } from '../../storages/selectors/metadata';\r\nimport TableEditableCell from '../UI/TableEditableCell';\r\n\r\ninterface Item {\r\n  key: string;\r\n  name: string;\r\n  age: string;\r\n  address: string;\r\n}\r\n\r\nexport interface EditableCellProps {\r\n  title: React.ReactNode;\r\n  editable: boolean;\r\n  children: React.ReactNode;\r\n  dataIndex: keyof Item;\r\n  record: Item;\r\n  // handleSave: (record: Item) => void;\r\n  // tablename: string,\r\n}\r\n\r\nconst DataTableEditableCell: React.FC<EditableCellProps> = ({\r\n  title,\r\n  editable,\r\n  children,\r\n  dataIndex,\r\n  record,\r\n  // tablename,\r\n  ...restProps\r\n}) => {\r\n  const { dictionary } = useDictionaryContext();\r\n  const {data: metadata} = useMetadataSelector();\r\n  const tablename = useGetTablename();\r\n\r\n  const [editing, setEditing] = useState(false);\r\n  const inputRef = useRef<Input>(null);\r\n  const form = useContext(EditableContext)!;\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (editing) {\r\n      inputRef.current!.focus();\r\n    }\r\n  }, [editing]);\r\n\r\n  const handleToggleEdit = () => {\r\n    setEditing(!editing);\r\n    form.setFieldsValue({ [dataIndex]: record[dataIndex] });\r\n  };\r\n\r\n  const save = async () => {\r\n    try {\r\n      const values = await form.validateFields();\r\n\r\n      handleToggleEdit();\r\n      if (metadata) {\r\n        const data = { ...record, ...values };\r\n        dispatch(dataUpdateAction(tablename, convertDataItem(dictionary, data, metadata, 'table')));\r\n      }\r\n    } catch (errInfo) {\r\n      console.log('Save failed:', errInfo);\r\n    }\r\n  };\r\n\r\n  return <TableEditableCell\r\n    title={title}\r\n    editing={editing}\r\n    editable={editable}\r\n    children={children}\r\n    dataIndex={dataIndex}\r\n    record={record}\r\n    handleSave={save}\r\n    handleToggleEdit={handleToggleEdit}\r\n    inputRef={inputRef}\r\n    {...restProps}\r\n  />\r\n};\r\n\r\nexport default DataTableEditableCell;\r\n","import { ReactElement } from 'react';\r\nimport { TData } from '../../types/TData';\r\n\r\nconst TableExpandableRow = (key: keyof TData) => {\r\n  return {\r\n    rowExpandable: (record: TData): boolean => !!record[key],\r\n    expandedRowRender: (record: TData): ReactElement => {\r\n      return <p>{record[key]}</p>\r\n    }\r\n  }\r\n};\r\n\r\nexport default TableExpandableRow;","import { Tooltip } from 'antd';\r\nimport { FilterOutlined } from '@ant-design/icons';\r\n\r\nconst TableFilterIcon = (filtered: boolean) => {\r\n  return (\r\n    <Tooltip placement=\"topLeft\" title=\"Фильтровать\">\r\n      <FilterOutlined style={{ fontSize: '17px', color: filtered ? '#1890ff' : undefined }} />\r\n    </Tooltip>\r\n  );\r\n}\r\n\r\nexport default TableFilterIcon;","import { Modal } from 'antd';\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\r\n\r\ntype TConfirmModal = ({\r\n  onOk: () => void,\r\n  onCancel: () => void,\r\n  onFinally?: () => void,\r\n  description?: string,\r\n  okText?: string,\r\n});\r\n\r\nconst { confirm  } = Modal;\r\n\r\nconst showConfirmModal = ({ onOk, onCancel, onFinally, description, okText }: TConfirmModal) => {\r\n  const handleOk = () => {\r\n    onOk();\r\n    if (onFinally && typeof onFinally === 'function') onFinally();\r\n  }\r\n\r\n  const handleCancel = () => {\r\n    onCancel();\r\n    if (onFinally && typeof onFinally === 'function') onFinally();\r\n  }\r\n\r\n  confirm({\r\n    title: 'Вы подтверждаете действие ?',\r\n    icon: <ExclamationCircleOutlined />,\r\n    content: description,\r\n    okText: okText || 'Удалить',\r\n    okType: 'danger',\r\n    cancelText: 'Отмена',\r\n    onOk: handleOk,\r\n    onCancel: handleCancel,\r\n  });\r\n}\r\n\r\nexport default showConfirmModal;","import { Modal } from 'antd';\r\nimport {\r\n  BellOutlined,\r\n  DeleteFilled,\r\n  EditFilled,\r\n  ScheduleOutlined,\r\n  ScheduleFilled\r\n} from '@ant-design/icons';\r\nimport showConfirmModal from '../Modals/ConfirmModal';\r\nimport { TActionBody } from \"../../types/TApiActionBody\";\r\nimport { TData } from \"../../types/TData\";\r\nimport { TDropdownMenu } from \"../../types/TDropdownMenu\";\r\nimport { TTableParameters } from \"../../types/TTableParameters\";\r\nimport classes from './ActionMenu.module.scss';\r\nimport { TDictionary } from '../../types/TDictionary';\r\nimport { convertDataItem } from '../../utils/convertDataItem';\r\n// import { TObject } from '../../types/TObject';\r\n\r\ntype TModals = 'editItem' | 'addDiscussion' | 'deleteItem';\r\n\r\ninterface IMenu {\r\n  dataItem: TData;\r\n  metadata: TData[] | null;\r\n  tableParameters: TTableParameters;\r\n  handleOpen: (t: TModals) => void;\r\n  handleEdit: (data: TActionBody) => void;\r\n  handleDelete: (data: TActionBody) => void;\r\n  handleGetConnectedData: (data: TActionBody) => void;\r\n  dictionary: TDictionary;\r\n}\r\n\r\nconst handleDummyClick = () => {\r\n  Modal.info({\r\n    title: 'Информирование',\r\n    content: 'Тестовое уведомление было отправлено'\r\n  })\r\n};\r\n\r\nexport const createActions = ({\r\n    dataItem,\r\n    metadata,\r\n    tableParameters,\r\n    handleOpen,\r\n    handleEdit,\r\n    handleDelete,\r\n    handleGetConnectedData,\r\n    dictionary,\r\n  }: IMenu) => {\r\n  const actions: TDropdownMenu[] = [];\r\n\r\n  if (tableParameters.hasDiscussion) {\r\n    const handleOpenAddDiscussion = () => {\r\n      handleOpen('addDiscussion');\r\n    }\r\n\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-add-discussion`,\r\n      onClick: handleOpenAddDiscussion,\r\n      icon: <ScheduleOutlined className={classes['action-menu']}/>,\r\n      title: 'Добавить обсуждение',\r\n    });\r\n\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-show-discussions`,\r\n      onClick: () => handleGetConnectedData(dataItem),\r\n      icon: <ScheduleFilled className={classes['action-menu']}/>,\r\n      title: 'Проведённые обсуждения',\r\n    });\r\n    actions.push({ type: 'divider', key: 'divider-discussion' });\r\n  }\r\n\r\n  if (tableParameters.hasEditMenu) {\r\n    const handleOpenEditMenu = () => {\r\n      handleOpen('editItem');\r\n    }\r\n\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-edit`,\r\n      onClick: handleOpenEditMenu,\r\n      icon: <EditFilled className={classes['action-menu']} />,\r\n      title: 'Редактировать',\r\n    });\r\n  }\r\n\r\n  if (tableParameters.hasSetStatusMenu && metadata) {\r\n    actions.push({\r\n      type: 'submenu',\r\n      key: `action-menu-${dataItem.key}-status`,\r\n      title: 'Изменить статус',\r\n      items: Object.entries(dictionary?.status).map(([statusKey, statusInfo]) => {\r\n        const values = convertDataItem(dictionary, dataItem, metadata, 'table');\r\n\r\n        return ({\r\n          key: `action-menu-status-${statusKey}`,\r\n          title: statusInfo.text,\r\n          onClick: () => {\r\n            values.status = statusKey;\r\n            handleEdit(values);\r\n          },\r\n        })\r\n      })\r\n    });\r\n  }\r\n\r\n  if (tableParameters.hasDeleteButton) {\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-delete`,\r\n      onClick: () => {\r\n        showConfirmModal({\r\n          onOk: () => handleDelete(dataItem),\r\n          onCancel: () => console.log(''),\r\n          description: 'Вы подтверждаете удаление данных ?',\r\n        });\r\n      },\r\n      icon: <DeleteFilled className={classes['action-menu']} />,\r\n      title: 'Удалить',\r\n    });\r\n  }\r\n\r\n  if (tableParameters.hasNotificationButton) {\r\n    actions.push({ type: 'divider', key: 'divider-notification' });\r\n    actions.push({\r\n      type: 'item',\r\n      key: `action-menu-${dataItem.key}-notify`,\r\n      onClick: handleDummyClick,\r\n      icon: <BellOutlined className={classes['action-menu']} />,\r\n      title: 'Отправить уведомление',\r\n    });\r\n  }\r\n\r\n  return actions;\r\n}\r\n","import React from \"react\";\r\nimport { Menu } from 'antd';\r\nimport { TDropdownMenu } from '../../../types/TDropdownMenu';\r\nimport classes from './DropdownMenu.module.scss';\r\nimport './DropdownMenu.css';\r\n\r\nconst DropdownMenu: React.FC<{menuItems: TDropdownMenu[]}> = ({ menuItems }) => {\r\n  return (\r\n    <Menu\r\n      className={classes['dropdown-menu']}\r\n      defaultSelectedKeys={[]}\r\n      selectedKeys={[]}\r\n      activeKey=\"something\"\r\n    >\r\n      {\r\n        menuItems.map((menuItem, index) => (\r\n          menuItem.type === 'divider' ? (\r\n            <Menu.Divider key={`divider-${index}`}/>\r\n          ) : (\r\n            menuItem.type === 'submenu' ? (\r\n              <Menu.SubMenu\r\n                key={menuItem.key}\r\n                title={menuItem.title}\r\n              >\r\n                {\r\n                  menuItem.items && menuItem.items.map((subMenuItem) => (\r\n                    <Menu.Item\r\n                      key={subMenuItem.key}\r\n                      onClick={subMenuItem.onClick}\r\n                      icon={subMenuItem.icon}\r\n                    >\r\n                      {subMenuItem.title}\r\n                    </Menu.Item>\r\n                  ))\r\n                }\r\n              </Menu.SubMenu>\r\n            ) : (\r\n              <Menu.Item\r\n                key={menuItem.key}\r\n                onClick={menuItem.onClick}\r\n                icon={menuItem.icon}\r\n              >\r\n                {menuItem.title}\r\n              </Menu.Item>\r\n            ))\r\n          )\r\n        )\r\n      }\r\n    </Menu>\r\n  )\r\n}\r\n\r\nexport default DropdownMenu;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useMetadataSelector } from '../../../storages/selectors/metadata';\r\nimport { getTableParameters } from '../../../utils/getTableParameters';\r\nimport { convertDataItem } from '../../../utils/convertDataItem';\r\nimport { IFormItem } from '../../../types/IFormItem';\r\nimport { TData } from '../../../types/TData';\r\nimport { TButton } from '../../../types/TButton';\r\nimport { useDictionaryContext } from '../../../context/DictionaryContext';\r\nimport ModalWithForm from '../../UI/ModalWithForm';\r\n\r\ninterface IDataEditModal {\r\n  isOpen: boolean;\r\n  onEditHandler: (data: TData) => void;\r\n  onAddHandler?: (data: TData) => void;\r\n  onClose: () => void;\r\n  formData: TData;\r\n}\r\n\r\nconst DataEditModal: React.FC<IDataEditModal> = ({\r\n  isOpen,\r\n  onEditHandler,\r\n  onAddHandler,\r\n  onClose,\r\n  formData\r\n}) => {\r\n  const { dictionary } = useDictionaryContext();\r\n\r\n  const { data: metadata, isError, isLoading } = useMetadataSelector();\r\n\r\n  const [formItems, setFormItems] = useState<IFormItem[]>([]);\r\n  const [initialValues, setInitialValues] = useState<TData>(formData);\r\n\r\n  useEffect(() => {\r\n    if (formItems && formData && metadata) {\r\n      setInitialValues(convertDataItem(dictionary, formData, metadata, 'modalEdit'));\r\n    }\r\n  }, [formData, formItems, dictionary, metadata]);\r\n\r\n  useEffect(() => {\r\n    if (metadata) {\r\n      setFormItems(metadata\r\n        .filter((m) => m.id !== 'specificParameters')\r\n        .filter((m) => !m.isPseudo)\r\n        .sort((a, b) => a.tableIndex - b.tableIndex)\r\n        .map((m) => {\r\n          return {\r\n            label: m.title,\r\n            name: m.id,\r\n            type: m.type,\r\n            // rules: m.addMenuIndex ? [{ required: true, message: 'Поле должно быть корректно заполнено!' }] : [],\r\n            rules: [],\r\n            disabled: !m.isEditable,\r\n          }\r\n      }));\r\n    }\r\n  }, [ metadata ]);\r\n\r\n  return (\r\n    metadata && !isError && !isLoading ? (\r\n      <ModalWithForm\r\n        title={getTableParameters(metadata).addMenuTitle || 'Добавить'}\r\n        okButtonTitle='Сохранить'\r\n        isOpen={isOpen}\r\n        handleOk={onEditHandler}\r\n        handleClose={onClose}\r\n        formItems={formItems}\r\n        initialValues={initialValues}\r\n        additionalButtons={[\r\n          {\r\n            onClick: onAddHandler,\r\n            title: 'Сохранить как новый'\r\n          } as TButton\r\n        ]}\r\n      />\r\n    ) : null\r\n  );\r\n};\r\n\r\nexport default DataEditModal;\r\n","import axios from \"axios\";\r\nimport { tuple } from \"antd/lib/_util/type\"\r\nimport { IFetchError } from \"../types/IFetchError\";\r\nimport { mainModes, urlApi } from \"../constants/constants\"\r\nimport Notification from \"../components/UI/Notification\";\r\n\r\nconst ModesType = tuple(...mainModes);\r\n\r\nexport class Api {\r\n  public static async getConnectedData (tablename: typeof ModesType[number], connectedTablename: typeof ModesType[number], id: string | number) {\r\n    try {\r\n      const result = await axios.get(`${urlApi}/${tablename}/get-${connectedTablename}/${id}`);\r\n      return result.data;\r\n    } catch (error) {\r\n      Notification({\r\n        type: 'error',\r\n        message: 'Ошибка при загрузке данных',\r\n        description: (error as IFetchError).message\r\n          ? (error as IFetchError).message\r\n          : (error as IFetchError).statusText,\r\n      });\r\n    }\r\n  }\r\n}\r\n","import { useCallback, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Dropdown, Tooltip } from 'antd';\r\nimport { CarryOutOutlined } from '@ant-design/icons';\r\nimport { TData } from '../../types/TData';\r\nimport { TTableParameters } from '../../types/TTableParameters';\r\nimport { TActionBody } from '../../types/TApiActionBody';\r\nimport { useMetadataSelector } from '../../storages/selectors/metadata';\r\nimport { dataAddAction, dataDeleteAction, dataUpdateAction } from '../../storages/actions/data';\r\nimport { createActions } from './createActions';\r\nimport DropdownMenu from '../UI/DropdownMenu';\r\nimport ModalWithList from '../UI/ModalWithList';\r\nimport DataEditModal from '../Modals/DataEditModal';\r\nimport DataAddModal from '../Modals/DataAddModal';\r\nimport { useDictionaryContext } from '../../context/DictionaryContext';\r\nimport { Api } from '../../utils/Api';\r\n\r\ntype TModals = 'editItem' | 'addDiscussion' | 'deleteItem';\r\n\r\ntype TActionMenu = {\r\n  title: string,\r\n  dataItem: TData,\r\n  tableParameters: TTableParameters,\r\n  tablename: string,\r\n};\r\n\r\nconst ActionMenu: React.FC<TActionMenu> = ({dataItem, title, tableParameters, tablename}) => {\r\n  const { dictionary } = useDictionaryContext();\r\n\r\n  const [openModal, setOpenModal] = useState<TModals>();\r\n\r\n  const { data: metadata } = useMetadataSelector();\r\n\r\n  const handleClose = () => setOpenModal(undefined);\r\n  const handleOpen = (t: TModals) => {\r\n    setOpenModal(t);\r\n  }\r\n\r\n  const handleEdit = (data: TActionBody) => dispatch(dataUpdateAction(tablename, data));\r\n  const handleDelete = (data: TActionBody) => dispatch(dataDeleteAction(tablename, data));\r\n  const handleAdd = (data: TActionBody) => {\r\n    delete data.id;\r\n    dispatch(dataAddAction(tablename, data));\r\n  }\r\n\r\n  const handleAddDiscussion = (data: TActionBody) => {\r\n    dispatch(dataAddAction('discussion', data));\r\n  }\r\n\r\n  const connectedTablename = 'discussion';\r\n  const handleGetConnectedData = useCallback(async (data: TActionBody) => {\r\n    const connectedData = await Api.getConnectedData(tablename, connectedTablename, +data.id);\r\n\r\n    if (connectedData) {\r\n      ModalWithList({\r\n        title: 'Обсуждения',\r\n        avatar: <CarryOutOutlined />,\r\n        dataSource: connectedData as {title: string, description: string}[],\r\n        noDataText: 'Ранее обсуждений не проводилось',\r\n      });\r\n    }\r\n  }, [tablename]);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const actions = createActions({\r\n    dataItem,\r\n    dictionary,\r\n    metadata,\r\n    tableParameters,\r\n    handleOpen,\r\n    handleDelete,\r\n    handleEdit,\r\n    handleGetConnectedData,\r\n  });\r\n\r\n  return (\r\n    actions.length ? (\r\n      <>\r\n        <DataEditModal\r\n          isOpen={openModal === 'editItem'}\r\n          onEditHandler={handleEdit}\r\n          onAddHandler={handleAdd}\r\n\r\n          onClose={handleClose}\r\n          formData={dataItem}\r\n        />\r\n\r\n        <DataAddModal\r\n          isOpen={openModal === 'addDiscussion'}\r\n          onAddHandler={handleAddDiscussion}\r\n          onClose={handleClose}\r\n          modalTablename='discussion'\r\n          modalInitialValues={{\r\n            theme: dataItem.text,\r\n            mainQuestions: dataItem.description\r\n          }}\r\n        />\r\n\r\n        <Tooltip placement='topRight' title={title}>\r\n          <Dropdown.Button\r\n            overlay={<DropdownMenu menuItems={actions} />}\r\n            trigger={['click']}\r\n          />\r\n        </Tooltip>\r\n      </>\r\n    ) : null\r\n  );\r\n};\r\n\r\nexport default ActionMenu;\r\n","import { TData } from \"../types/TData\"\r\nimport moment from \"moment\";\r\nimport 'moment/locale/ru';\r\n\r\nmoment.locale('ru');\r\n\r\ntype TGetTableWithPseudoFields = (\r\n  sourceData: TData[],\r\n  columns: TData[],\r\n) => TData[];\r\n\r\nexport const getTableWithPseudoFields: TGetTableWithPseudoFields = (\r\n  sourceData,\r\n  columns,\r\n) => {\r\n  return sourceData.map((data) => {\r\n    const dataInfo = {...data}\r\n    columns.forEach((column) => {\r\n      if (column.isPseudo) {\r\n        try {\r\n          if (column.pseudoFieldFormula === 'prettyDate') {\r\n            dataInfo[column.id] = moment(new Date(dataInfo.date)).format('dddd, DD MMMM');\r\n          } else {\r\n            // eval(\"dataInfo[column.id] = moment(new Date(dataInfo.date + ' ' + dataInfo.time)).format('dddd, DD MMMM')\");\r\n          }\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    })\r\n    return dataInfo;\r\n  });\r\n}\r\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { ConfigProvider, Pagination, Table, Tag } from 'antd';\r\nimport { SortOrder } from 'antd/lib/table/interface';\r\nimport ruRU from 'antd/lib/locale/ru_RU';\r\nimport { TData } from '../../../types/TData';\r\nimport { TDictionary } from '../../../types/TDictionary';\r\nimport { TTableParameters } from '../../../types/TTableParameters';\r\nimport { TObject } from '../../../types/TObject';\r\nimport TableEditableRow from '../TableEditableRow';\r\nimport DataTableEditableCell from '../../TableEditableCell';\r\nimport TableExpandableRow from '../TableExpandableRow';\r\nimport TableFilterIcon from '../TableFilterIcon';\r\nimport ActionMenu from '../../ActionMenu';\r\nimport { usePrintPDFContext } from '../../../context/PrintPDFContext';\r\nimport { useFilterDrawer } from '../FilterPanel';\r\nimport { useColumnsDrawer } from '../ColumnsPanel';\r\nimport classes from './Table.module.scss';\r\nimport './Table.css';\r\nimport { getTableWithPseudoFields } from '../../../utils/getTableWithPseudoFields';\r\nimport { updateTableColumnsWidth } from '../../../utils/updateTableColumnsWidth';\r\nimport { addActionColumnInfo } from '../../../utils/addActionColumnInfo';\r\n\r\ntype TTableProps = {\r\n  data: TData[],\r\n  columns: TData[],\r\n  tableParameters: TTableParameters,\r\n  tablename: string,\r\n  dictionary: TDictionary\r\n  invertDictionary: TObject<Record<string, string>>\r\n};\r\n\r\nconst PAGE_SIZE = 10;\r\n\r\nconst DataTable: React.FC<TTableProps> = ({\r\n  data,\r\n  columns,\r\n  tableParameters,\r\n  tablename,\r\n  dictionary,\r\n  invertDictionary\r\n}) => {\r\n  const { setDataPrintRef, setDataPrintMode, dataPrintMode } = usePrintPDFContext();\r\n  const dataRef = useRef<HTMLDivElement>(null)\r\n  const [page, setPage] = useState<number>(1);\r\n  const [pageSize, setPageSize] = useState<number>(PAGE_SIZE);\r\n  const [defaultSort, setDefaultSort] = useState<boolean>(true);\r\n\r\n  const hasActionMenu = tableParameters.hasActionMenu;\r\n\r\n  useEffect(() => {\r\n    if (dataRef) setDataPrintRef(dataRef)\r\n  }, [setDataPrintRef]);\r\n\r\n  const sourceData = useMemo(() => {\r\n    return data.map((dataItem, index) => {\r\n      return {\r\n        ...dataItem,\r\n        key: `table-row-${dataItem.id}-${index}`,\r\n        action: hasActionMenu\r\n        ? <ActionMenu\r\n            key={`action-menu-${dataItem.id}-${index}`}\r\n            title='Меню действий'\r\n            dataItem={dataItem}\r\n            tableParameters={tableParameters}\r\n            tablename={tablename}\r\n          />\r\n        : null\r\n      }\r\n    })\r\n  }, [data, tableParameters, hasActionMenu, tablename])\r\n\r\n  const getDefaultSorter = (field: string) => {\r\n    if (Array.isArray(tableParameters.defaultSortField)) {\r\n      const index = tableParameters.defaultSortField.indexOf(field);\r\n\r\n      return index < 0\r\n        ? null\r\n        : (tableParameters.defaultSortDirection as string[])[index];\r\n    }\r\n    return field === tableParameters.defaultSortField\r\n      ? tableParameters.defaultSortDirection\r\n      : null;\r\n  }\r\n\r\n  const { ColumnsPanelButtons, ColumnsPanel, columnsData } = useColumnsDrawer(columns);\r\n\r\n  let tableColumns: TData[] = columnsData\r\n    .map((column) => {\r\n      const tableColumn: TData = {\r\n        ...column,\r\n        filterIcon: TableFilterIcon,\r\n      };\r\n\r\n      if (!column.isInlineEditable) {\r\n        tableColumn.render = (text: string, record: TData) => {\r\n          const columnId = column.dataIndex;\r\n          const tableValue = record[columnId];\r\n          const originalValue = invertDictionary[columnId] && invertDictionary[columnId][tableValue]\r\n            ? invertDictionary[columnId][tableValue]\r\n            : tableValue;\r\n\r\n          return column.isTagged\r\n            ? <Tag color={dictionary[columnId][originalValue]?.tag}>{text}</Tag>\r\n            : text\r\n        };\r\n      } else {\r\n        tableColumn.onCell = (record: any) => ({\r\n          record,\r\n          editable: column.isInlineEditable,\r\n          dataIndex: column.dataIndex,\r\n          title: column.title,\r\n        });\r\n      }\r\n\r\n      const sortOrder = (getDefaultSorter(column.dataIndex)) as SortOrder;\r\n      if (sortOrder && defaultSort) tableColumn.sortOrder = sortOrder;\r\n\r\n      return tableColumn;\r\n      }\r\n    )\r\n\r\n  tableColumns = addActionColumnInfo(tableColumns, hasActionMenu);\r\n  tableColumns = updateTableColumnsWidth(tableColumns);\r\n\r\n  const { FilterButtons, FilterPanel, filterData } = useFilterDrawer(columnsData, sourceData);\r\n\r\n  const handleChangePage = useCallback((nextPage: number, pageSize: number) => {\r\n    setPage(nextPage);\r\n    setPageSize(pageSize);\r\n  }, [])\r\n\r\n  const TableTitle = useCallback(() => (\r\n    <div className={classes['table-title']}>\r\n      <div>\r\n        {FilterButtons}\r\n\r\n        {ColumnsPanelButtons}\r\n      </div>\r\n\r\n      <Pagination\r\n        showSizeChanger\r\n        current={page}\r\n        pageSize={pageSize}\r\n        onChange={handleChangePage}\r\n        total={(filterData || []).length}\r\n      />\r\n    </div>\r\n  ), [ FilterButtons, ColumnsPanelButtons, filterData, page, pageSize, handleChangePage ]);\r\n\r\n  useEffect(() => {\r\n    if (dataPrintMode === 'all') {\r\n      setPageSize(0);\r\n      setDataPrintMode('print');\r\n    } else if (dataPrintMode === 'current') {\r\n    } else {\r\n      setPageSize(PAGE_SIZE);\r\n    }\r\n  }, [filterData, pageSize, dataPrintMode, setDataPrintMode])\r\n\r\n  return (\r\n    <ConfigProvider locale={ruRU}>\r\n      {FilterPanel}\r\n\r\n      {ColumnsPanel}\r\n\r\n      <Table\r\n        ref={dataRef}\r\n        dataSource={ getTableWithPseudoFields(filterData, tableColumns) }\r\n        columns={ tableColumns }\r\n        title={TableTitle}\r\n        tableLayout='auto'\r\n        components={{\r\n          body: {\r\n            row: TableEditableRow,\r\n            cell: DataTableEditableCell\r\n          },\r\n        }}\r\n        rowClassName={() => 'editable-row'}\r\n        bordered={ false }\r\n        loading={ false }\r\n        size='large'\r\n        expandable={ TableExpandableRow('description') }\r\n        // expandIcon\r\n        sticky={ true }\r\n        pagination={{\r\n          position: ['topRight'],\r\n          pageSize: pageSize,\r\n          current: page,\r\n          total: filterData.length,\r\n          className: classes['hidden-pagination']\r\n        }}\r\n        className={ classes.table }\r\n        onChange={() => setDefaultSort(false)}\r\n      />\r\n    </ConfigProvider>\r\n  );\r\n}\r\n\r\nexport default DataTable;\r\n","import { useCallback, useEffect, useMemo, useState } from \"react\"\r\nimport { Button, Drawer, Tooltip, Form, Checkbox } from \"antd\";\r\nimport { OrderedListOutlined } from '@ant-design/icons';\r\nimport { TData } from \"../../../types/TData\";\r\nimport { IFormItem } from \"../../../types/IFormItem\";\r\nimport classes from './ColumnsPanel.module.scss';\r\n\r\nexport const useColumnsDrawer = (metadata: TData[], initialVisible: boolean = false) => {\r\n  const [columnsData, setColumnsData] = useState<TData[]>([]);\r\n  const [visible, setVisible] = useState<boolean>(initialVisible);\r\n  const [form] = Form.useForm();\r\n\r\n  useEffect(() => {\r\n    if (metadata) setColumnsData(metadata)\r\n  }, [metadata]);\r\n\r\n  const openPanel = useCallback(() => setVisible(true), []);\r\n  const closePanel = useCallback(() => setVisible(false), []);\r\n\r\n  const resetColumns = useCallback(() => {\r\n    setColumnsData(metadata);\r\n    form.setFields(metadata.map(({dataIndex, showInTable}) => ({\r\n      name: dataIndex,\r\n      value: showInTable,\r\n    })));\r\n  }, [form, metadata]);\r\n\r\n  const handleSubmit = useCallback((values: any) => {\r\n    setColumnsData((prev) => {\r\n      return prev.map((columnData) => {\r\n        return {\r\n          ...columnData,\r\n          showInTable: values[columnData.dataIndex] ?? false\r\n        }\r\n      })\r\n    });\r\n    closePanel();\r\n  }, [closePanel]);\r\n\r\n  const ColumnsPanelButtons = useMemo<JSX.Element>(() => (\r\n    <Tooltip\r\n      placement='topRight'\r\n      title='Выбрать колонки'\r\n    >\r\n      <Button\r\n        onClick={openPanel}\r\n        className={classes['select-columns-button']}\r\n        icon={<OrderedListOutlined style={{ fontSize: '20px' }}/>}\r\n      />\r\n    </Tooltip>\r\n  ), [openPanel]);\r\n\r\n  const ColumnsPanel = useMemo(() => (\r\n    <Drawer\r\n      title='Колонки'\r\n      placement=\"right\"\r\n      onClose={closePanel}\r\n      visible={visible}\r\n      width={250}\r\n    >\r\n      <Form\r\n        name='basic'\r\n        preserve={false}\r\n        labelCol={{ span: 20 }}\r\n        wrapperCol={{ span: 4 }}\r\n        onFinish={handleSubmit}\r\n        onFinishFailed={console.log}\r\n        form={form}\r\n      >\r\n        <Form.Item wrapperCol={{ span: 24 }}>\r\n          <Button onClick={resetColumns} style={{width: '100%'}}>По умолчанию</Button>\r\n        </Form.Item>\r\n\r\n        {\r\n          columnsData\r\n            .map((columnData: TData) => {\r\n              const formItem: IFormItem = {\r\n                name: columnData.dataIndex,\r\n                label: columnData.title,\r\n                type: columnData.type,\r\n                disabled: false,\r\n              }\r\n\r\n              return (\r\n                <Form.Item\r\n                  key={formItem.name}\r\n                  label={formItem.label}\r\n                  name={formItem.name}\r\n                  valuePropName=\"checked\"\r\n                  initialValue={columnData.showInTable}\r\n                  style={{marginBottom: '12px'}}\r\n                >\r\n                  <Checkbox value={true}/>\r\n                </Form.Item>\r\n              );\r\n            })\r\n        }\r\n\r\n        <Form.Item wrapperCol={{ span: 24 }} style={{marginTop: '30px'}}>\r\n          <Button type=\"primary\" htmlType=\"submit\" style={{width: '100%'}}>Применить</Button>\r\n        </Form.Item>\r\n\r\n      </Form>\r\n    </Drawer>\r\n  ), [\r\n    form,\r\n    columnsData,\r\n    visible,\r\n    closePanel,\r\n    resetColumns,\r\n    handleSubmit,\r\n  ]);\r\n\r\n  const data = useMemo(() => (columnsData ?? []).filter((d) => d.showInTable), [columnsData]);\r\n\r\n  return {\r\n    ColumnsPanelButtons,\r\n    ColumnsPanel,\r\n    columnsData: data\r\n  };\r\n}\r\n","import { TData } from \"../types/TData\";\r\n\r\nexport const addActionColumnInfo = (columns: TData[], hasActionMenu?: boolean): TData[] => {\r\n  const tableColumns = [...columns];\r\n  if (hasActionMenu) tableColumns.push({\r\n    dataIndex: 'action',\r\n    key: 'action',\r\n    isInlineEditable: false,\r\n    showInTable: true,\r\n    type: 'action',\r\n    className: 'table-action-column',\r\n  })\r\n\r\n  return tableColumns;\r\n}\r\n","import { TData } from \"../types/TData\";\r\nimport classes from '../components/UI/Table/Table.module.scss';\r\n\r\nexport const updateTableColumnsWidth = (tableColumns: TData[]): TData[] => {\r\n  return tableColumns.map((tableColumn) => {\r\n    return tableColumn.dataIndex !== 'action'\r\n      ? {\r\n        ...tableColumn,\r\n        className: classes[`table-title-row-${Math.ceil(((tableColumn.title?.length ?? 1)*7 + 48)/10)*10}`],\r\n      }\r\n      : {...tableColumn}\r\n  })\r\n}\r\n","import { useCallback, useMemo, useState } from \"react\"\r\nimport {\r\n  Button,\r\n  Drawer,\r\n  Tooltip,\r\n  Form,\r\n  Input,\r\n  Select,\r\n  DatePicker,\r\n  TimePicker,\r\n  Col,\r\n  Row,\r\n  Checkbox\r\n} from \"antd\";\r\nimport { FilterOutlined, FilterFilled } from '@ant-design/icons';\r\nimport { TData } from \"../../../types/TData\";\r\nimport { IFormItem } from \"../../../types/IFormItem\";\r\nimport { useDictionaryContext } from \"../../../context/DictionaryContext\";\r\nimport classes from './FilterPanel.module.scss';\r\n\r\nexport const useFilterDrawer = (tableColumns: TData[], sourceData: TData[], initialVisible = false) => {\r\n  const { dictionary } = useDictionaryContext();\r\n\r\n  const [visibleResetButton, setVisibleResetButton] = useState<boolean>(false);\r\n  const [filterData, setFilterData] = useState<TData[]>();\r\n  const [visible, setVisible] = useState<boolean>(initialVisible);\r\n  const [form] = Form.useForm();\r\n\r\n  const openPanel = useCallback((e: any) => {\r\n    setVisible(true);\r\n  }, []);\r\n\r\n  const closePanel = useCallback(() => {\r\n    setVisible(false);\r\n  }, []);\r\n\r\n  const data = useMemo(() => filterData ?? sourceData, [filterData, sourceData]);\r\n\r\n  const handleReset = useCallback(() => {\r\n    setFilterData(sourceData);\r\n    setVisibleResetButton(false);\r\n    form.resetFields();\r\n  }, [sourceData, form]);\r\n\r\n  const handleSubmit = useCallback((values: any) => {\r\n    setVisibleResetButton(false);\r\n    setFilterData(sourceData\r\n      .filter((data: TData) => {\r\n        return Object.keys(data).reduce((acc, key) => {\r\n          let value = dictionary && dictionary[key] ? dictionary[key][values[key]].text : values[key];\r\n          if (typeof data[key] === 'number') value = +value;\r\n          if (typeof data[key] === 'boolean') value = !!value;\r\n          if (value) setVisibleResetButton(true);\r\n          return acc\r\n            && (\r\n                (typeof data[key] === 'boolean' && data[key] === value) ||\r\n                (!value && typeof data[key] !== 'boolean') ||\r\n                (value && data[key] && data[key] === value)\r\n              )\r\n        }, true)\r\n      })\r\n    )\r\n    closePanel();\r\n  }, [dictionary, sourceData, closePanel]);\r\n\r\n  const FilterButtons = useMemo<JSX.Element>(() => (\r\n    <div>\r\n      <Tooltip\r\n        placement='topRight'\r\n        title='Показать фильтры'\r\n      >\r\n        <Button\r\n          onClick={openPanel}\r\n          className={classes['filter-button']}\r\n        >\r\n          {\r\n            visibleResetButton ?\r\n            <FilterFilled style={{ fontSize: '20px' }}/> :\r\n            <FilterOutlined style={{ fontSize: '20px' }}/>\r\n          }\r\n        </Button>\r\n      </Tooltip>\r\n      <Button\r\n        onClick={handleReset}\r\n        className={classes['reset-filter-button']}\r\n        style={{display: visibleResetButton ? 'inline' : 'none'}}\r\n      >\r\n        Сбросить фильтры\r\n      </Button>\r\n    </div>\r\n  ), [openPanel, handleReset, visibleResetButton]);\r\n\r\n  const FilterPanel = useMemo(() => (\r\n    <Drawer\r\n      title='Фильтры'\r\n      placement=\"right\"\r\n      onClose={closePanel}\r\n      visible={visible}\r\n      width={430}\r\n    >\r\n      <Form\r\n        name='basic'\r\n        preserve={false}\r\n        labelCol={{ span: 8 }}\r\n        wrapperCol={{ span: 16 }}\r\n        // initialValues={initialValues ? initialValues : {}}\r\n        onFinish={handleSubmit}\r\n        form={form}\r\n      >\r\n        {\r\n          tableColumns\r\n            .filter((tableColumn) => tableColumn.isFilter)\r\n            .map((tableColumn: TData) => {\r\n              const formItem: IFormItem = {\r\n                name: tableColumn.dataIndex,\r\n                label: tableColumn.title,\r\n                type: tableColumn.type,\r\n                disabled: false\r\n              }\r\n\r\n              return (\r\n                <Form.Item\r\n                  key={formItem.name}\r\n                  label={formItem.label}\r\n                  name={formItem.name}\r\n                  valuePropName={formItem.type === 'checkbox' ? 'checked' : 'value'}\r\n                >\r\n                  {\r\n                    (['string', 'number'].includes(formItem.type)) ?\r\n                      <Input /> :\r\n                    formItem.type === 'fulltext' ?\r\n                      <Input.TextArea /> :\r\n                    formItem.type === 'checkbox' ?\r\n                      <Checkbox value={true} /> :\r\n                    (['select', 'multi-select'].includes(formItem.type)) && dictionary[formItem.name] ? (\r\n                      <Select\r\n                        allowClear\r\n                        filterOption={(value: string, option) => RegExp(value, 'i').test(`${option?.label}`)}\r\n                        mode={formItem.type === 'multi-select' ? 'multiple' : undefined}\r\n                        showSearch\r\n                        options={Object.entries(dictionary[formItem.name]).map(([value, info]) => (\r\n                          { value, label: info.text }\r\n                        ))}\r\n                      />\r\n                    ) :\r\n                    formItem.type === 'date' ?\r\n                      <DatePicker format=\"YYYY-MM-DD\" /> :\r\n                    formItem.type === 'datetime' ?\r\n                      <DatePicker format=\"YYYY-MM-DD HH:mm:ss\" showTime /> :\r\n                    formItem.type === 'time' ?\r\n                      <TimePicker format=\"HH:mm:ss\" /> :\r\n                    null\r\n                  }\r\n                </Form.Item>\r\n              );\r\n            })\r\n        }\r\n\r\n        <Form.Item wrapperCol={{ span: 24 }} style={{marginTop: '50px'}}>\r\n          <Row>\r\n            <Col span={12}>\r\n              <Button onClick={handleReset}>Сбросить</Button>\r\n            </Col>\r\n            <Col span={12} style={{textAlign: 'right'}}>\r\n              <Button type=\"primary\" htmlType=\"submit\">Применить</Button>\r\n            </Col>\r\n          </Row>\r\n        </Form.Item>\r\n      </Form>\r\n    </Drawer>\r\n  ), [\r\n    form,\r\n    dictionary,\r\n    tableColumns,\r\n    visible,\r\n    closePanel,\r\n    handleReset,\r\n    handleSubmit,\r\n  ]);\r\n\r\n  return {\r\n    FilterButtons,\r\n    FilterPanel,\r\n    filterData: data\r\n  };\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Typography } from 'antd';\r\nimport { TTableParameters } from '../../types/TTableParameters';\r\nimport { mapMetadataToColumns } from '../../utils/mapMetadataToColumns';\r\nimport { useGetDataMeta } from '../../utils/hooks/useGetDataMeta';\r\nimport { getTableParameters } from '../../utils/getTableParameters';\r\nimport { useGetTablename } from '../../utils/hooks/useGetTablename';\r\nimport Table from '../UI/Table';\r\nimport LoadingComponent from '../UI/LoadingComponent';\r\nimport { useDictionaryContext } from '../../context/DictionaryContext';\r\nimport classes from './DataTable.module.scss';\r\n\r\nconst { Title } = Typography;\r\n\r\nconst DataTable: React.FC = () => {\r\n  const [tableParameters, setTableParameters] = useState<TTableParameters | null>(null);\r\n\r\n  const tablename = useGetTablename();\r\n  const { dictionary, invertDictionary } = useDictionaryContext();\r\n\r\n  const {\r\n    data: sourceData, isErrorData, isLoadingData,\r\n    metadata, isErrorMetadata, isLoadingMetadata\r\n  } = useGetDataMeta(tablename);\r\n\r\n  useEffect(() => {\r\n    if (metadata) {\r\n      setTableParameters(getTableParameters(metadata));\r\n    }\r\n  }, [metadata]);\r\n\r\n  return (\r\n    isLoadingData || isLoadingMetadata ? (\r\n      <div className={classes.center}>\r\n        <LoadingComponent />\r\n      </div>\r\n    ) : (\r\n      (isErrorData || isErrorMetadata) && !sourceData ? (\r\n        <div className={classes.center}>\r\n          <Title level={3}>Ошибка получения данных</Title>\r\n        </div>\r\n      ) : (\r\n        sourceData && metadata && tableParameters &&\r\n          <Table\r\n            data={sourceData}\r\n            columns={mapMetadataToColumns(metadata)}\r\n            tableParameters={tableParameters}\r\n            tablename={tablename}\r\n            dictionary={dictionary}\r\n            invertDictionary={invertDictionary}\r\n          />\r\n      )\r\n    )\r\n  )\r\n}\r\n\r\nexport default DataTable\r\n"],"sourceRoot":""}